import{d as B,z as b,J as a,L as h,o as f,n as L,B as o,l as n,b as O,C as _,t as x,k as R,a as N,j as C,F as Z,r as j,m as J,p as P}from"./index-BRyf49M4.js";import{v as G}from"./vuetify-Dxbcsmt7.js";import{B as K,C as l,q as Q}from"./replicant_store-B4RLeTBF.js";import{M as W}from"./MediaCard-CrGKkGJ4.js";import{v as X}from"./v4-CtRu48qb.js";import"./_commonjsHelpers-BosuxZz1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"flex-grow-1"},ee=B({__name:"Alert",props:{alert:{},index:{}},setup(y){const s=y,u=b(!1),r=b("0"),m=b(""),p=b("0"),v=b(!1);function c(t){return!!t||"Required"}function g(t){return!Number.isNaN(Number(t))||"Must be a number"}function D(t){return Number(t)>=0||"Must be equal to or bigger than 0"}function S(t){return Number(t)<=0||"Must be equal to or smaller than 0"}function M(t){return!!K.value.find(i=>i.name===t)||"Asset name must match a file uploaded"}function T(){nodecg.sendMessage("omnibarPlaySound",{amount:s.alert.threshold})}function q(){u.value=!0,r.value=s.alert.threshold.toString()??"0",m.value=s.alert.sound??"",p.value=s.alert.volume.toString()??"0"}function w(){if(!l.data)return;const t={id:s.alert.id,threshold:Number(r.value),sound:m.value,volume:Number(p.value),graphic:s.alert.graphic,graphicDisplayTime:s.alert.graphicDisplayTime},e=l.data.findIndex(i=>i.id===t.id);e>-1&&(l.data[e]=Q(t),l.save()),u.value=!1}function U(){if(!l.data)return;const t=l.data.findIndex(e=>e.id===s.alert.id);t>-1&&(l.data.splice(t,1),l.save())}return(t,e)=>{const i=a("v-text-field"),E=a("v-form"),I=a("v-card-text"),$=a("v-spacer"),A=a("v-btn"),F=a("v-card-actions"),z=a("v-card"),H=a("v-dialog"),V=a("v-icon");return f(),h(W,{class:"d-flex align-center px-2",style:L({"text-align":"unset",height:"40px","margin-top":t.index>0?"10px":0})},{default:o(()=>[n(H,{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=d=>u.value=d)},{default:o(()=>[n(z,null,{default:o(()=>[n(I,{class:"pa-4 pb-0"},{default:o(()=>[n(E,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=d=>v.value=d)},{default:o(()=>[n(i,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=d=>r.value=d),label:"Amount Threshold in Dollars","prepend-icon":"mdi-cash",autocomplete:"off",rules:[c,g,D],filled:"",dense:""},null,8,["modelValue","rules"]),n(i,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=d=>m.value=d),label:"Sound Asset Name","prepend-icon":"mdi-music-box",autocomplete:"off",rules:[c,M],filled:"",dense:""},null,8,["modelValue","rules"]),n(i,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=d=>p.value=d),label:"Volume in dB","prepend-icon":"mdi-volume-high",autocomplete:"off",rules:[c,g,S],filled:"",dense:""},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),n(F,null,{default:o(()=>[n($),n(A,{onClick:w,disabled:!v.value},{default:o(()=>e[6]||(e[6]=[_("Save")])),_:1},8,["disabled"]),n(A,{onClick:e[4]||(e[4]=d=>u.value=!1)},{default:o(()=>e[7]||(e[7]=[_("Cancel")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(V,{class:"mr-2",onClick:T},{default:o(()=>e[8]||(e[8]=[_(" mdi-play ")])),_:1}),O("div",Y," $"+x(t.alert.threshold)+" - "+x(t.alert.sound||"N/A")+" ("+x(t.alert.volume)+" dB) ",1),n(V,{onClick:q},{default:o(()=>e[9]||(e[9]=[_(" mdi-pencil ")])),_:1}),n(V,{onClick:U},{default:o(()=>e[10]||(e[10]=[_(" mdi-delete ")])),_:1})]),_:1},8,["style"])}}}),te={key:0,class:"pa-3 font-italic"},ne={key:1,style:{"margin-top":"10px"}},oe=B({__name:"main",setup(y){R({title:"Donation alert control"});function s(){var u;(u=l.data)==null||u.push({id:X(),threshold:0,sound:null,volume:50,graphic:null,graphicDisplayTime:5}),l.save()}return(u,r)=>{const m=a("v-btn"),p=a("v-app");return f(),h(p,null,{default:o(()=>{var v;return[n(m,{onClick:s},{default:o(()=>r[0]||(r[0]=[_("Add New Donation Alert Tier")])),_:1}),(v=C(l).data)!=null&&v.length?(f(),N("div",ne,[(f(!0),N(Z,null,j(C(l).data,(c,g)=>(f(),h(ee,{key:c.id,alert:c,index:g},null,8,["alert","index"]))),128))])):(f(),N("div",te," No donation alert tiers created, add a new one with the button above. "))]}),_:1})}}}),k=J(oe),le=P();k.use(le);k.use(G);k.mount("#app");
