import{d as k,N as _,a as R,o as u,j as i,b as f,A as n,B as d,K as x,k as p,t as v,c as g,F as B,y as $,D,i as z,z as L,f as N,l as A,m as M}from"./index-Ce_smM0X.js";import{v as E}from"./vuetify-BC_h0XMe.js";import{d as F,c as G}from"./pinia-ey_1N9KB.js";import{e as I,i as c,q as V}from"./replicant_store-BlOELdrX.js";import{w as T}from"./helpers-Cfq79ybz.js";import{M as b}from"./MediaCard-CQGdsCYj.js";import{D as C}from"./vuedraggable.umd-CwaN1Msl.js";import{v as P}from"./v4-CtRu48qb.js";import"./_commonjsHelpers-BosuxZz1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={style:{"max-height":"400px","overflow-y":"auto"}},H=k({__name:"AvailableImagesVideos",setup(m){const{bundleName:o}=nodecg;function s(a){return{type:"Media",id:P(),mediaUUID:a.sum}}return(a,l)=>{const e=_("v-toolbar-title");return u(),R("div",null,[i(e,null,{default:n(()=>l[0]||(l[0]=[d(" Available Images/Videos ")])),_:1}),f("div",j,[p(I).length?(u(),x(p(C),{key:1,list:p(I),group:{name:"intermission",pull:"clone",put:!1},sort:!1,clone:s,"item-key":"sum"},{item:n(({element:t})=>[i(b,null,{default:n(()=>[d(v(t.name),1)]),_:2},1024)]),_:1},8,["list"])):(u(),x(b,{key:0,style:{"font-style":"italic","white-space":"unset"}},{default:n(()=>[d(' Add images/videos under "Assets" > "'+v(p(o))+'" > "Intermission Slide Images/Videos". ',1)]),_:1}))])])}}}),O={class:"text-center"},q=k({__name:"CurrentItem",setup(m){const o=g(()=>{var e;return(e=c.data)==null?void 0:e.current}),s=g(()=>{var e;return(e=c.data)==null?void 0:e.rotation.length}),a=g(()=>{var e;return((e=c.data)==null?void 0:e.rotation.findIndex(t=>{var r;return t.id===((r=o.value)==null?void 0:r.id)}))??-1}),l=g(()=>{var t;const e=o.value;return(e==null?void 0:e.type)==="Media"?((t=I.value.find(r=>r.sum===(e==null?void 0:e.mediaUUID)))==null?void 0:t.name)||"":(e==null?void 0:e.type)==="UpcomingRuns"?"Upcoming Runs":(e==null?void 0:e.type)==="RandomBid"?"Random Bid":(e==null?void 0:e.type)==="RandomPrize"?"Random Prize":"?"});return(e,t)=>(u(),R("div",O,[o.value?(u(),R(B,{key:0},[t[0]||(t[0]=f("span",{class:"font-weight-bold"},"Current:",-1)),d(" "+v(l.value)+" ",1),t[1]||(t[1]=f("br",null,null,-1)),t[2]||(t[2]=f("span",{class:"font-weight-bold"},"Position:",-1)),d(" "+v(a.value+1||"?")+"/"+v(s.value),1)],64)):(u(),R(B,{key:1},[d(" No slide current displaying. ")],64))]))}}),K={style:{"max-height":"400px","overflow-y":"auto"}},J=k({__name:"OtherSlides",setup(m){const o=[{type:"UpcomingRuns",name:"Upcoming Runs"},{type:"RandomBid",name:"Random Bid"},{type:"RandomPrize",name:"Random Prize"}];function s(a){return{type:a.type,id:P(),mediaUUID:"-1"}}return(a,l)=>{const e=_("v-toolbar-title");return u(),R("div",null,[i(e,null,{default:n(()=>l[0]||(l[0]=[d(" Other Slides ")])),_:1}),f("div",K,[i(p(C),{list:o,group:{name:"intermission",pull:"clone",put:!1},sort:!1,clone:s,"item-key":"type"},{item:n(({element:t})=>[(u(),x(b,{key:t.type},{default:n(()=>[d(v(t.name),1)]),_:2},1024))]),_:1})])])}}}),h=F("intermissionSlides",()=>{const m=$(!1),o=$([]);function s({val:e,manual:t=!1}){o.value=V(e),m.value=t}function a(e){const t=o.value.findIndex(r=>r.id===e);t>-1&&(o.value.splice(t,1),m.value=!0)}function l(){c.data.rotation=V(o.value),c.save(),m.value=!1}return{localEdits:m,localRotation:o,setLocalRotation:s,deleteItem:a,storeToGlobalLocation:l}}),Q={style:{"max-height":"400px","overflow-y":"auto"}},W={class:"d-flex align-center justify-center flex-grow-1",style:{overflow:"hidden"}},X={class:"d-flex"},Y=k({__name:"Rotation",setup(m){const o=h(),s=g({get:()=>o.localRotation,set:e=>{o.setLocalRotation({val:e,manual:!0})}});function a(e){var t;return e.type==="Media"?((t=I.value.find(r=>r.sum===e.mediaUUID))==null?void 0:t.name)||"":e.type==="UpcomingRuns"?"Upcoming Runs":e.type==="RandomBid"?"Random Bid":e.type==="RandomPrize"?"Random Prize":"?"}function l(e){o.deleteItem(e)}return(e,t)=>{const r=_("v-toolbar-title"),w=_("v-icon");return u(),R("div",null,[i(r,null,{default:n(()=>t[1]||(t[1]=[d(" Rotation ")])),_:1}),f("div",Q,[s.value.length?D("",!0):(u(),x(b,{key:0,style:{"font-style":"italic"}},{default:n(()=>t[2]||(t[2]=[d(" Drag elements from above to here to configure. ")])),_:1})),i(p(C),{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=y=>s.value=y),group:"intermission","item-key":"id"},{item:n(({element:y})=>[i(b,{class:"d-flex"},{default:n(()=>[f("div",W,v(a(y)),1),f("div",X,[i(w,{onClick:S=>l(y.id)},{default:n(()=>t[3]||(t[3]=[d(" mdi-delete ")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:1},8,["modelValue"])])])}}}),Z={class:"d-flex mt-4"},ee=k({__name:"main",setup(m){z({title:"Intermission Slide Control"});const o=h(),s=g(()=>o.localEdits);function a(e){o.setLocalRotation({val:V(e||c.data.rotation)})}function l(){o.storeToGlobalLocation()}return L(()=>{var e;return(e=c.data)==null?void 0:e.rotation},e=>{o.localEdits||a(e)}),N(async()=>{await T(c),a()}),(e,t)=>{const r=_("v-btn"),w=_("v-icon"),y=_("v-app");return p(c).data?(u(),x(y,{key:0},{default:n(()=>[i(H),i(J,{style:{"margin-top":"20px"}}),i(Y,{modelValue:p(o).localRotation,"onUpdate:modelValue":t[0]||(t[0]=S=>p(o).localRotation=S),style:{"margin-top":"20px"}},null,8,["modelValue"]),f("div",Z,[i(r,{class:"flex-grow-1 mr-2",disabled:!s.value,onClick:l},{default:n(()=>t[2]||(t[2]=[d(" Save ")])),_:1},8,["disabled"]),i(r,{disabled:!s.value,onClick:t[1]||(t[1]=S=>a())},{default:n(()=>[i(w,null,{default:n(()=>t[3]||(t[3]=[d("mdi-refresh")])),_:1})]),_:1},8,["disabled"])]),i(q,{style:{"margin-top":"20px"}})]),_:1})):D("",!0)}}}),U=A(ee),te=M(),oe=G();U.use(te);U.use(E);U.use(oe);U.mount("#app");
