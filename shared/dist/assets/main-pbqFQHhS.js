import{z as S,c as A,d as k,J as c,a as g,i as P,j as p,o as m,l as o,b as x,B as r,C as y,F,r as D,t as C,G as N,L as E,H as R,R as H,k as M,A as I,N as j,S as G,m as q,p as z}from"./index-DqcJ0cuC.js";import{v as J}from"./vuetify-H0AyR9tY.js";import{d as K,s as B,c as O}from"./pinia-DERsbL5d.js";import{L as u,q as Q,F as V}from"./replicant_store-DazYO-BV.js";import{D as W}from"./vuedraggable.umd-DXmOXERd.js";import{M as T}from"./MediaCard-Cxeq7s-s.js";import"./_commonjsHelpers-BosuxZz1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";let L;const $=K("videoPlayer",()=>{const b=S(!1),a=S(!1),s=S([]),i=S("intermission");function l(){var d,_;s.value=((d=u.data)==null?void 0:d.playlist)??[],i.value=((_=u.data)==null?void 0:_.finishScene)??"intermission",a.value=!1}function e(){a.value=!0,clearTimeout(L),L=window.setTimeout(()=>{l()},30*1e3)}function t(d){s.value.push(d),e()}function n(d){i.value=d,e()}const v=A({get:()=>i.value,set:d=>{i.value=d,e()}});async function w(){u.data&&(b.value=!0,u.data.playlist=Q(s.value),u.data.finishScene=i.value,u.save(),await new Promise(d=>{setTimeout(d,1e3)}),b.value=!1,clearTimeout(L),a.value=!1)}return{disableSave:b,localEdits:a,newPlaylist:s,newFinishScene:i,finishSceneModel:v,save:w,playlistAdd:t,setFinishScene:n,onLocalEdits:e,resetLocalPlaylist:l}}),X={key:0},Y={style:{"margin-top":"10px"}},Z={key:0,style:{"font-style":"italic"}},ee={style:{height:"250px","overflow-y":"scroll","overflow-x":"hidden",margin:0,padding:"10px"}},te=["data-value"],ne={class:"d-flex align-center",style:{"margin-right":"10px"}},le={style:{width:"25px","text-align":"center"}},ae=["title"],oe=k({__name:"AvailableVideos",setup(b){const a=$(),s=S(null);function i(e){var t,n;return((n=(t=u.data)==null?void 0:t.plays)==null?void 0:n[e])||0}const l=A(()=>V.value.filter(e=>{const t=s.value?s.value.toLowerCase():"";return!t||t&&e.name.toLowerCase().includes(t)}).map(e=>[i(e.sum),e]).sort().map(e=>e[1]));return(e,t)=>{var _;const n=c("v-toolbar-title"),v=c("v-text-field"),w=c("v-icon"),d=c("v-btn");return p(u).data?(m(),g("div",X,[o(n,null,{default:r(()=>t[1]||(t[1]=[y(" Available Videos ")])),_:1}),x("div",Y,[(_=p(V))!=null&&_.length?(m(),g(F,{key:1},[o(v,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=f=>s.value=f),filled:"",clearable:"",label:"Search...","append-icon":"mdi-magnify",messages:`
            ${l.value.length} video${l.value.length===1?"":"s"} found.
          `},null,8,["modelValue","messages"]),x("div",ee,[(m(!0),g(F,null,D(l.value,f=>(m(),g("div",{key:f.sum,class:"d-flex align-center","data-value":f.sum,style:{margin:"5px","margin-left":0}},[x("div",ne,[o(d,{icon:"",outlined:"",small:"",style:{"margin-right":"10px"},onClick:U=>p(a).playlistAdd(f.sum)},{default:r(()=>[o(w,{small:""},{default:r(()=>t[2]||(t[2]=[y(" mdi-playlist-plus ")])),_:1})]),_:2},1032,["onClick"]),o(w,null,{default:r(()=>t[3]||(t[3]=[y(" mdi-play ")])),_:1}),x("div",le,C(i(f.sum)),1)]),x("div",{title:f.name},C(f.name),9,ae)],8,te))),128))])],64)):(m(),g("span",Z,' Add videos under "Assets" > "esa-layouts" > "Videos". '))])])):P("",!0)}}}),se={class:"d-flex justify-center flex-grow-1",style:{overflow:"hidden","font-style":"italic"}},ie=k({__name:"Playlist",setup(b){const a=$(),{newPlaylist:s,localEdits:i}=B(a);function l(t){var n;return(n=V.value.find(v=>v.sum===t))==null?void 0:n.name}function e(t){a.newPlaylist.splice(t,1),a.onLocalEdits()}return(t,n)=>{const v=c("v-toolbar-title"),w=c("v-alert"),d=c("v-icon");return m(),g("div",null,[o(v,null,{default:r(()=>n[1]||(n[1]=[y(" Playlist ")])),_:1}),N(o(w,{type:"warning",dense:"",style:{"margin-top":"5px"}},{default:r(()=>n[2]||(n[2]=[y(" Local changes have been made. ")])),_:1},512),[[R,p(i)]]),p(s).length?P("",!0):(m(),E(T,{key:0,style:{"font-style":"italic"}},{default:r(()=>n[3]||(n[3]=[y(" Add videos using the list above. ")])),_:1})),o(p(W),{modelValue:p(s),"onUpdate:modelValue":n[0]||(n[0]=_=>H(s)?s.value=_:null)},{item:r(({element:_,index:f})=>[(m(),E(T,{key:`${_}_${f}`,class:"d-flex align-center"},{default:r(()=>[x("div",se,C(l(_)||"Could not find video name."),1),o(d,{onClick:U=>e(f),class:"mr-1"},{default:r(()=>n[4]||(n[4]=[y(" mdi-delete ")])),_:2},1032,["onClick"])]),_:2},1024))]),_:1},8,["modelValue"])])}}}),re={key:0,style:{"text-align":"center"}},de={key:0},ue={key:1},ce=k({__name:"CurrentVideoInfo",setup(b){const a=A(()=>{var i;return(i=V.value.find(l=>{var e;return l.sum===((e=u.data)==null?void 0:e.current)}))==null?void 0:i.name});function s(){nodecg.sendMessage("stopFullScreenVideoPlayerEarly")}return(i,l)=>{const e=c("v-btn");return p(u).data?N((m(),g("div",re,[l[1]||(l[1]=x("span",{class:"font-weight-bold"},"Currently Playing:",-1)),l[2]||(l[2]=x("br",null,null,-1)),a.value?(m(),g("span",de,C(a.value),1)):(m(),g("span",ue,"Unknown (Usually Commercial w/o Video)")),o(e,{color:"red",class:"mt-2",onClick:s,block:""},{default:r(()=>l[0]||(l[0]=[y("Emergency Stop")])),_:1})],512)),[[R,p(u).data.playing]]):P("",!0)}}}),me=k({__name:"SceneControl",setup(b){const a=$(),{newFinishScene:s}=B(a);function i(l){a.setFinishScene(l)}return(l,e)=>{const t=c("v-toolbar-title"),n=c("v-radio"),v=c("v-radio-group");return m(),g("div",null,[o(t,null,{default:r(()=>e[0]||(e[0]=[y(" Target scene on playlist end: ")])),_:1}),o(v,{style:{"margin-top":"5px"},"model-value":p(s),"onUpdate:modelValue":i},{default:r(()=>[o(n,{label:"Intermission",value:"intermission"}),o(n,{label:"Game Layout",value:"gameLayout"}),o(n,{label:"Interview",value:"interview"})]),_:1},8,["model-value"])])}}}),pe={class:"d-flex",style:{"margin-top":"10px"}},ve=k({__name:"main",setup(b){M({title:"Full Screen Player control"});const a=$();function s(){var l;a.$patch({newPlaylist:((l=u.data)==null?void 0:l.playlist)??[],localEdits:!1})}I(()=>u.data,()=>{a.localEdits||a.resetLocalPlaylist()},{immediate:!0});async function i(){u.data&&await a.save()}return(l,e)=>{const t=c("v-btn"),n=c("v-icon"),v=c("v-tooltip"),w=c("v-app");return p(u).data?(m(),E(w,{key:0},{default:r(()=>[o(oe),o(ie,{style:{"margin-top":"20px"}}),o(me,{style:{"margin-top":"20px"}}),x("div",pe,[o(t,{class:"flex-grow-1",loading:p(a).disableSave,disabled:p(a).disableSave,onClick:e[0]||(e[0]=d=>i())},{default:r(()=>e[2]||(e[2]=[y(" Save ")])),_:1},8,["loading","disabled"]),o(v,{left:""},{activator:r(({targetRef:d})=>[o(t,j({style:{"margin-left":"5px"},onClick:e[1]||(e[1]=_=>s())},G(d)),{default:r(()=>[o(n,null,{default:r(()=>e[3]||(e[3]=[y(" mdi-refresh ")])),_:1})]),_:2},1040)]),default:r(()=>[e[4]||(e[4]=x("span",null,"Revert Local Changes",-1))]),_:1})]),o(ce,{style:{"margin-top":"10px"}})]),_:1})):P("",!0)}}}),h=q(ve),_e=z(),fe=O();h.use(_e);h.use(J);h.use(fe);h.mount("#app");
