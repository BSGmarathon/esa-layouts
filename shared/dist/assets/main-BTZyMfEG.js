import{d as b,y as A,c as C,f as z,a as p,o as u,b as i,F as R,r as re,e as de,t as f,D as Y,n as O,B as x,k as D,z as q,u as be,g as W,M as Te,K as te,j as G,E as ce,A as ue,O as Be,P as ke,i as Ce,l as Ee,m as ze}from"./index-Ce_smM0X.js";import{o as De,h as H,S as Me,q as $e,b as M,m as X,v as j}from"./replicant_store-ByKiGZ6y.js";import{f as F,w as _,b as pe,c as Pe,d as Oe}from"./helpers-ZI0DYonA.js";import{g as K}from"./index-DEqwg3Z9.js";import{l as se}from"./lodash-Cn84nazp.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as Q,r as fe,u as me,e as oe}from"./en-gb-Bshs-i9q.js";import{w as ne}from"./helpers-Cfq79ybz.js";/* empty css                  */import"./_commonjsHelpers-BosuxZz1.js";const Fe="/bundles/esa-layouts/shared/dist/assets/mind_logo_tag-jpeemcPp.png",je="data:image/png;base64,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",Qe={class:"Flex"},Ie={id:"Total",class:"Flex"},Le={style:{position:"absolute",top:"10px",left:"180px","z-index":99999999999}},Ue={style:{"font-size":"28px",color:"#7FFF00","font-weight":600,"background-color":"rgba(0,0,0,0.6)",padding:"4px 8px","border-radius":"10px"}},Se=b({__name:"Total",emits:["totalUpdate"],setup(a,{emit:e}){const t=e,n=A(0),s=A(!1),l=A(!1),o=A("â‚¬0"),r=[];let m;const y=nodecg.bundleConfig.additionalDonations,E=C(()=>y.map(c=>{var d,g;return{key:c.key,description:c.description,amount:c.amount,active:((g=(d=De.data)==null?void 0:d.find(w=>w.key===c.key))==null?void 0:g.active)??!1}})),T=C(()=>E.value.filter(c=>c.active).reduce((c,d)=>c+d.amount,0)),v=C(()=>se.round((H.data??0)+T.value,2)),B=C(()=>F(n.value));async function h(c=!1){nodecg.sendMessage("donationAlertsLogging",`playNextAlert called (start: ${c})`),clearTimeout(m),s.value=!0,c||await new Promise(N=>{setTimeout(N,500)});const{amount:d,total:g,showAlert:w}=r[0];nodecg.sendMessage("donationAlertsLogging",`alert - amount: ${d}, total: ${g}, showAlert: ${w}`),d&&d>0&&w&&(nodecg.sendMessage("omnibarPlaySound",{amount:d}),await new Promise(N=>{setTimeout(N,500)}),l.value=!0,o.value=F(d));const U=g??n.value+(d??0);nodecg.sendMessage("donationAlertsLogging",`decided we should animate to ${U}`),K.to(n,{value:U,duration:5}),await new Promise(N=>{setTimeout(N,6e3)}),r.shift(),l.value=!1,r.length?h():n.value!==v.value?(nodecg.sendMessage("donationAlertsLogging",`totals do not match at end of queue, pushing another total alert (was ${n.value}, should be ${v.value})`),clearTimeout(m),r.push({total:v.value,showAlert:!1}),h()):(nodecg.sendMessage("donationAlertsLogging","queue ended"),s.value=!1),t("totalUpdate",U)}return n.value=v.value,nodecg.listenFor("donationTotalUpdated",c=>{const d=se.round(c.total+T.value,2);!s.value&&d!==n.value&&(nodecg.sendMessage("donationAlertsLogging","donationTotalTimeout decided we should push a new total as an alert"),r.push({total:d,amount:d-n.value,showAlert:!0}),s.value||h(!0))}),nodecg.listenFor("newDonation",c=>{clearTimeout(m),r.push({amount:c.amount,showAlert:!0}),s.value||h(!0)}),nodecg.listenFor("additionalDonationToggle",c=>{const d=E.value.find(g=>g.key===c.key);d&&(r.push({amount:(c.active?1:-1)*d.amount,showAlert:c.active}),s.value||h(!0))}),z(async()=>{for(;typeof n.value<"u";)await _(100);t("totalUpdate",n.value)}),(c,d)=>{var g;return u(),p("div",Qe,[d[1]||(d[1]=i("div",{class:"arrow_base right dash_seg_2"},null,-1)),d[2]||(d[2]=i("div",{class:"arrow_base right dash_seg_1"},null,-1)),i("div",Ie,[(u(!0),p(R,null,re(B.value,(w,U)=>(u(),p("span",{key:U,class:de(w===","?"Comma":void 0)},f(w),3))),128))]),i("div",Le,[r[0]?(u(),p("div",{key:0,style:O({"z-index":1,opacity:l.value?1:0,transition:"opacity 0.5s"}),class:"Flex coin-thing"},[d[0]||(d[0]=i("img",{src:je,style:{height:"50px","image-rendering":"pixelated","margin-right":"5px"}},null,-1)),i("span",Ue,f(r[0]?(g=r[0].amount)==null?void 0:g.toFixed(2):"â‚¬0"),1)],4)):Y("",!0)])])}}}),Ke=L(Se,[["__scopeId","data-v-0e57f4b4"]]),Ye={style:{"white-space":"pre"}},Ne=b({__name:"GenericMsg",props:{msg:{default:"Message?"},seconds:{default:25}},emits:["end"],setup(a,{emit:e}){const t=e,n=C(()=>a.msg.split(`
`).length);return z(async()=>{await _(a.seconds*1e3),t("end")}),(s,l)=>(u(),p("div",{class:"Flex",style:O({"font-size":n.value<2?"33px":"29px","white-space":"nowrap","font-weight":500,"text-align":"center"})},[i("span",Ye,f(s.msg),1)],4))}}),Xe={ref:"Tweet",class:"Flex Alert",style:{padding:"0 17px",height:"100%","font-weight":500,"flex-direction":"column","align-items":"flex-start",overflow:"hidden"}},Ge=b({__name:"Tweet",setup(a){return(e,t)=>(u(),p("div",Xe," Call duncte if this is ever shown. We don't even use RabbitMQ so this will never happen! (tweet) ",512))}}),He={ref:"MiniCredits",class:"Flex Alert MiniCredits",style:{padding:"0 17px",height:"100%","flex-direction":"column","align-items":"flex-start",overflow:"hidden"}},Re=b({__name:"MiniCredits",emits:["end"],setup(a,{emit:e}){const t=e;return z(()=>{t("end")}),(n,s)=>(u(),p("div",He," Minicredits not yet implemented in vue 3. ",512))}}),We=L(Re,[["__scopeId","data-v-4308b581"]]),Ze="/bundles/esa-layouts/shared/dist/assets/CrowdControl-DLpuA2SG.png",Ve={class:"Flex Alert",style:{padding:"0 17px",height:"100%","font-weight":500,"flex-direction":"column","align-items":"flex-start"}},qe={style:{"font-size":"23px","white-space":"nowrap",overflow:"hidden"}},Je=b({__name:"CrowdControl",props:{msg:{default:"Message?"},seconds:{default:25}},emits:["end"],setup(a,{emit:e}){const t=a,n=e;return z(async()=>{await _(t.seconds*1e3),n("end")}),(s,l)=>(u(),p("div",Ve,[l[0]||(l[0]=i("div",{style:{"font-size":"25px"}},[i("img",{src:Ze,style:{height:"1.2em",margin:"0 .05em 0 .1em","vertical-align":"-0.25em"}}),x(" Crowd Control ")],-1)),i("div",qe,f(s.msg),1)]))}}),et={class:"Flex",style:{padding:"0 17px","padding-top":"10px",height:"100%","font-weight":500,"flex-direction":"column","align-items":"flex-start"}},tt={style:{"font-size":"25px"}},st={style:{"font-size":"35px"}},nt={key:0},ot={key:0},it={key:1},at=b({__name:"UpcomingRun",props:{seconds:{default:25},run:{}},emits:["end"],setup(a,{emit:e}){Q.extend(fe),Q.extend(me);const t=e,{getRunTotalPlayers:n}=Me,s=C(()=>a.run.scheduledS&&a.run.scheduledS>Date.now()/1e3?`in about ${Q.utc().to(Q.unix(a.run.scheduledS),!0)}`:"soon");function l(o){return o.teams.map(r=>r.name||r.players.map(m=>m.name).join(", ")).join(" vs. ")||"N/A"}return z(async()=>{await _(a.seconds*1e3),t("end")}),(o,r)=>(u(),p("div",et,[i("div",tt,f(s.value),1),i("div",st,[D(n)(o.run)>0?(u(),p("span",nt,[x(f(l(o.run))+" play",1),D(n)(o.run)===1?(u(),p("span",ot,"s")):Y("",!0),x(" "+f(o.run.game),1)])):(u(),p("span",it,f(o.run.game),1))])]))}}),lt={class:"Flex",style:{padding:"0 17px","padding-top":"10px",height:"100%","font-weight":500,"flex-direction":"column","align-items":"flex-start"}},rt={style:{"font-size":"35px"}},dt={style:{"font-size":"20px"}},ct=b({__name:"Prize",props:{seconds:{default:25},prize:{}},emits:["end"],setup(a,{emit:e}){Q.extend(fe),Q.extend(me),Q.locale({...oe,name:"en-prizes",relativeTime:{...oe.relativeTime,s:"few seconds",m:"minute",h:"hour",d:"day",M:"month",y:"year"}},{},!0);const t=e,n=C(()=>a.prize.endTime?Q.unix(a.prize.endTime/1e3).utc().locale("en-prizes").fromNow(!0):"");return z(async()=>{await _(a.seconds*1e3),t("end")}),(s,l)=>(u(),p("div",lt,[i("div",rt," Prize Available: "+f(s.prize.name),1),i("div",dt," Provided by "+f(s.prize.provided)+", minimum donation amount: $"+f(s.prize.minimumBid.toFixed(2))+" (donate in the next "+f(n.value)+") ",1)]))}});function S(a,e){const t=a.find(n=>n.id===e);if(!t)throw new Error(`Bid with id ${e} not found.`);return $e(t)}const ut={class:"Goal",style:{height:"100%",display:"flex","align-items":"center"}},pt={style:{position:"relative","flex-grow":1,height:"70px","background-color":"rgba(0, 0, 0, 0.3)"}},ft={style:{display:"flex","justify-content":"space-between","align-items":"center",position:"absolute",width:"100%",height:"100%",padding:"0 10px","box-sizing":"border-box"}},mt={style:{width:"30%","font-size":"0px"}},gt={class:"BarText",style:{"font-size":"20px"}},ht={key:0,style:{color:"#42ff38","font-weight":700}},vt={key:1},yt={class:"BarTextFull",style:{"font-size":"20px","text-align":"center"}},wt={style:{width:"30%","text-align":"right","font-size":"0px"}},xt={class:"BarText",style:{"font-size":"25px"}},At=b({__name:"Goal",props:{seconds:{},bidId:{}},emits:["end"],setup(a,{emit:e}){const t=e,n=A({progress:0,total:0}),s=A({id:-1,goal:69,game:"",name:"",options:[],war:!0,allowUserOptions:!1,total:0}),l=C(()=>F(Math.max((s.value.goal??0)-n.value.total,0)));function o(){K.to(n.value,{progress:s.value.total/(s.value.goal??0)*100,total:s.value.total,duration:2.5})}return q(()=>M.data,r=>{if(r)try{s.value=S(r,a.bidId),o()}catch{t("end")}},{deep:!0,immediate:!0}),z(async()=>{await ne(M);try{s.value=S(M.data,a.bidId),o()}catch{t("end");return}a.seconds>=0&&(await _(a.seconds*1e3),t("end"))}),(r,m)=>(u(),p("div",ut,[i("div",pt,[i("div",{class:"Bar",style:O({position:"absolute",width:`${n.value.progress}%`,height:"100%","background-color":"#6DD47E"})},null,4),i("div",ft,[i("div",mt,[i("span",gt,[s.value.goal<=s.value.total?(u(),p("span",ht," MET! ")):(u(),p("span",vt,[m[0]||(m[0]=i("span",{style:{"font-weight":600}},"Remaining:",-1)),x(" "+f(l.value),1)]))])]),i("div",yt,[i("div",null,[x(f(s.value.game)+" ",1),m[1]||(m[1]=i("br",null,null,-1)),x(f(s.value.name),1)])]),i("div",wt,[i("span",xt,[m[2]||(m[2]=i("span",{style:{"font-weight":600}},"Goal:",-1)),x(" "+f(D(F)(s.value.goal||0)),1)])])])])]))}}),_t=L(At,[["__scopeId","data-v-7867d897"]]),bt={class:"War1v1",style:{height:"100%",display:"flex","align-items":"center"}},Tt={style:{position:"relative","flex-grow":1,height:"70px","background-color":"rgba(0, 0, 0, 0.3)"}},Bt={style:{display:"flex","justify-content":"space-between",position:"absolute",width:"100%",height:"100%"}},kt={style:{display:"flex","justify-content":"space-between","align-items":"center",position:"absolute",width:"100%",height:"100%",padding:"0 10px","box-sizing":"border-box","z-index":1,"font-size":"0px"}},Ct={class:"BarText",style:{"font-size":"20px"}},Et={style:{"text-align":"right"}},zt={class:"BarText",style:{"font-size":"20px"}},Dt={style:{position:"absolute",width:"100%",height:"100%","z-index":2,display:"flex","justify-content":"center"}},Mt={style:{"font-size":"20px","text-align":"center","background-color":"rgba(0, 0, 0, 0.4)",padding:"0 10px",display:"flex","flex-direction":"column","justify-content":"center","line-height":"150%",height:"100%"}},$t=b({__name:"War-1v1",props:{seconds:{},bidId:{}},emits:["end"],setup(a,{emit:e}){const t=e,n=A({progress1:0,progress2:0,total1:0,total2:0}),s=A({id:-1,game:"",name:"",options:[{name:"",parent:-1,total:0,id:1},{name:"",parent:-1,total:0,id:2}],war:!0,allowUserOptions:!1,total:0});function l(){K.to(n.value,{progress1:s.value.options[0].total/s.value.total*100,progress2:s.value.options[1].total/s.value.total*100,total1:s.value.options[0].total,total2:s.value.options[1].total,duration:2.5})}return q(()=>M.data,o=>{o&&(s.value=S(o,a.bidId),l())},{deep:!0,immediate:!0}),z(async()=>{await ne(M),s.value=S(M.data,a.bidId),l(),a.seconds>=0&&(await _(a.seconds*1e3),t("end"))}),(o,r)=>(u(),p("div",bt,[i("div",Tt,[i("div",Bt,[i("div",{style:O({width:`${n.value.progress1}%`,"background-color":"#FFD55A"})},null,4),i("div",{style:O({width:`${n.value.progress2}%`,"background-color":"#6DD47E"})},null,4)]),i("div",kt,[i("div",null,[i("span",Ct,f(s.value.options[0].name)+" - "+f(D(F)(n.value.total1)),1)]),i("div",Et,[i("span",zt,f(D(F)(n.value.total2))+" - "+f(s.value.options[1].name),1)])]),i("div",Dt,[i("div",Mt,[x(f(s.value.game)+" ",1),r[0]||(r[0]=i("br",null,null,-1)),x(f(s.value.name),1)])])])]))}}),Pt=L($t,[["__scopeId","data-v-3c9363ae"]]);/*!
 * ScrollToPlugin 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var k,ge,P,$,I,he,ve,ee,ye=function(){return typeof window<"u"},we=function(){return k||ye()&&(k=window.gsap)&&k.registerPlugin&&k},xe=function(e){return typeof e=="string"},ie=function(e){return typeof e=="function"},Z=function(e,t){var n=t==="x"?"Width":"Height",s="scroll"+n,l="client"+n;return e===P||e===$||e===I?Math.max($[s],I[s])-(P["inner"+n]||$[l]||I[l]):e[s]-e["offset"+n]},V=function(e,t){var n="scroll"+(t==="x"?"Left":"Top");return e===P&&(e.pageXOffset!=null?n="page"+t.toUpperCase()+"Offset":e=$[n]!=null?$:I),function(){return e[n]}},Ot=function(e,t,n,s){if(ie(e)&&(e=e(t,n,s)),typeof e!="object")return xe(e)&&e!=="max"&&e.charAt(1)!=="="?{x:e,y:e}:{y:e};if(e.nodeType)return{y:e,x:e};var l={},o;for(o in e)l[o]=o!=="onAutoKill"&&ie(e[o])?e[o](t,n,s):e[o];return l},Ae=function(e,t){if(e=he(e)[0],!e||!e.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var n=e.getBoundingClientRect(),s=!t||t===P||t===I,l=s?{top:$.clientTop-(P.pageYOffset||$.scrollTop||I.scrollTop||0),left:$.clientLeft-(P.pageXOffset||$.scrollLeft||I.scrollLeft||0)}:t.getBoundingClientRect(),o={x:n.left-l.left,y:n.top-l.top};return!s&&t&&(o.x+=V(t,"x")(),o.y+=V(t,"y")()),o},ae=function(e,t,n,s,l){return!isNaN(e)&&typeof e!="object"?parseFloat(e)-l:xe(e)&&e.charAt(1)==="="?parseFloat(e.substr(2))*(e.charAt(0)==="-"?-1:1)+s-l:e==="max"?Z(t,n)-l:Math.min(Z(t,n),Ae(e,t)[n]-l)},le=function(){k=we(),ye()&&k&&typeof document<"u"&&document.body&&(P=window,I=document.body,$=document.documentElement,he=k.utils.toArray,k.config({autoKillThreshold:7}),ve=k.config(),ge=1)},J={version:"3.12.5",name:"scrollTo",rawVars:1,register:function(e){k=e,le()},init:function(e,t,n,s,l){ge||le();var o=this,r=k.getProperty(e,"scrollSnapType");o.isWin=e===P,o.target=e,o.tween=n,t=Ot(t,s,e,l),o.vars=t,o.autoKill=!!t.autoKill,o.getX=V(e,"x"),o.getY=V(e,"y"),o.x=o.xPrev=o.getX(),o.y=o.yPrev=o.getY(),ee||(ee=k.core.globals().ScrollTrigger),k.getProperty(e,"scrollBehavior")==="smooth"&&k.set(e,{scrollBehavior:"auto"}),r&&r!=="none"&&(o.snap=1,o.snapInline=e.style.scrollSnapType,e.style.scrollSnapType="none"),t.x!=null?(o.add(o,"x",o.x,ae(t.x,e,"x",o.x,t.offsetX||0),s,l),o._props.push("scrollTo_x")):o.skipX=1,t.y!=null?(o.add(o,"y",o.y,ae(t.y,e,"y",o.y,t.offsetY||0),s,l),o._props.push("scrollTo_y")):o.skipY=1},render:function(e,t){for(var n=t._pt,s=t.target,l=t.tween,o=t.autoKill,r=t.xPrev,m=t.yPrev,y=t.isWin,E=t.snap,T=t.snapInline,v,B,h,c,d;n;)n.r(e,n.d),n=n._next;v=y||!t.skipX?t.getX():r,B=y||!t.skipY?t.getY():m,h=B-m,c=v-r,d=ve.autoKillThreshold,t.x<0&&(t.x=0),t.y<0&&(t.y=0),o&&(!t.skipX&&(c>d||c<-d)&&v<Z(s,"x")&&(t.skipX=1),!t.skipY&&(h>d||h<-d)&&B<Z(s,"y")&&(t.skipY=1),t.skipX&&t.skipY&&(l.kill(),t.vars.onAutoKill&&t.vars.onAutoKill.apply(l,t.vars.onAutoKillParams||[]))),y?P.scrollTo(t.skipX?v:t.x,t.skipY?B:t.y):(t.skipY||(s.scrollTop=t.y),t.skipX||(s.scrollLeft=t.x)),E&&(e===1||e===0)&&(B=s.scrollTop,v=s.scrollLeft,T?s.style.scrollSnapType=T:s.style.removeProperty("scroll-snap-type"),s.scrollTop=B+1,s.scrollLeft=v+1,s.scrollTop=B,s.scrollLeft=v),t.xPrev=t.x,t.yPrev=t.y,ee&&ee.update()},kill:function(e){var t=e==="scrollTo",n=this._props.indexOf(e);return(t||e==="scrollTo_x")&&(this.skipX=1),(t||e==="scrollTo_y")&&(this.skipY=1),n>-1&&this._props.splice(n,1),!this._props.length}};J.max=Z;J.getOffset=Ae;J.buildGetter=V;we()&&k.registerPlugin(J);const Ft={class:"WarOther",style:{height:"100%",display:"flex","align-items":"center"}},jt={style:{"flex-grow":1,display:"flex",height:"70px",overflow:"hidden"}},Qt={style:{display:"flex","justify-content":"center","flex-direction":"column","font-size":"20px","text-align":"center",padding:"0 10px","white-space":"nowrap","line-height":"150%"}},It={ref:"OptionsBar",style:{position:"relative","flex-grow":1,"white-space":"nowrap","font-size":"20px",overflow:"hidden",display:"flex","align-items":"center"}},Lt=["id"],Ut={style:{"font-weight":600}},St=["id"],Kt=b({__name:"War-Other",props:{seconds:{},bidId:{}},emits:["end"],setup(a,{emit:e}){K.registerPlugin(J);const t=e,n=A({id:-1,goal:69,game:"",name:"",options:[],war:!0,allowUserOptions:!1,total:0}),s=C(()=>{const h=se.orderBy(n.value.options,["total"],["desc"]);return h.map(({id:c,name:d,total:g},w)=>({id:c,name:d,total:g,winning:(w===0||g>=h[0].total)&&g>0}))}),l=A([]),o=be("OptionsBar");let r,m=!1;function y(){const h=se.orderBy(n.value.options,["total"],["desc"]);return h.map(({id:c,name:d,total:g},w)=>({id:c,name:d,total:g,winning:(w===0||g>=h[0].total)&&g>0}))}function E(){r==null||r.kill(),r=void 0}async function T(){try{E(),n.value=S(M.data,a.bidId),l.value=y(),await W(),await B()}catch{t("end")}}async function v(){if(!o.value)return;m=!1,r=K.timeline({paused:!0,onComplete:()=>{window.setTimeout(()=>{a.seconds>=0?t("end"):m?T().catch(console.log):r==null||r.restart()},4e3)}}),await _(4e3);const h=n.value.allowUserOptions?s.value.length+1:s.value.length,c=o.value.scrollWidth-o.value.clientWidth;let d=0;for(let g=1;g<h;g+=1){const w=document.getElementById(`Option${g+1}`);c>w.offsetLeft&&(d+=1)}for(let g=1;g<h;g+=1){const w=document.getElementById(`Option${g+1}`),U=g>1?`+=${Math.max((a.seconds-8)/(d+1),2)}`:void 0;if(r.to(o.value,{scrollLeft:Math.min(w.offsetLeft,c),duration:2},U),c<=w.offsetLeft)break}a.seconds<1&&r.to(o.value,{scrollTo:{x:0},duration:2},"+=4"),r.resume()}async function B(){if(o.value.scrollWidth<=o.value.clientWidth){a.seconds>=0&&(await _(a.seconds*1e3),t("end"));return}await v()}return q(()=>M.data,h=>{if(!h)return;const c=S(h,a.bidId);pe(n.value,c)||(m=!0,r!=null&&r.isActive()||T().catch(console.log))},{deep:!0}),z(async()=>{await ne(M);try{n.value=S(M.data,a.bidId),l.value=y(),await W(),await B()}catch(h){console.error(h),t("end")}}),Te(()=>{E()}),(h,c)=>(u(),p("div",Ft,[i("div",jt,[i("div",Qt,[x(f(n.value.game)+" ",1),c[0]||(c[0]=i("br",null,null,-1)),x(f(n.value.name),1)]),c[1]||(c[1]=i("div",{style:{width:"3px","background-color":"white"}},null,-1)),i("div",It,[(u(!0),p(R,null,re(l.value,(d,g)=>(u(),p("div",{key:d.id,class:"Option",style:O({"background-color":d.winning?"#6DD47E":"#B37BA4","margin-left":g>0?"5px":"0"}),id:`Option${g+1}`},[i("span",Ut,f(d.name),1),x(": "+f(D(F)(d.total)),1)],12,Lt))),128)),n.value.allowUserOptions?(u(),p("div",{key:0,class:"Option",id:`Option${s.value.length+1}`},[s.value.length?(u(),p(R,{key:1},[x("...or submit your own!")],64)):(u(),p(R,{key:0},[x("No options submitted yet, be the first!")],64))],8,St)):Y("",!0)],512)])]))}}),Yt=L(Kt,[["__scopeId","data-v-00497193"]]),Nt={style:{height:"100%",overflow:"hidden"}},Xt=b({__name:"Bid",props:{seconds:{default:25},bid:{},bidId:{}},emits:["end"],setup(a,{emit:e}){const t=e;function n(){t("end")}return(s,l)=>(u(),p("div",Nt,[s.bid&&!s.bid.war?(u(),te(_t,{key:0,"bid-id":s.bidId,seconds:s.seconds,onEnd:n},null,8,["bid-id","seconds"])):s.bid?(u(),p(R,{key:1},[s.bid.options.length===2&&!s.bid.allowUserOptions?(u(),te(Pt,{key:0,"bid-id":s.bidId,seconds:s.seconds,onEnd:n},null,8,["bid-id","seconds"])):(u(),te(Yt,{key:1,"bid-id":s.bidId,seconds:s.seconds,onEnd:n},null,8,["bid-id","seconds"]))],64)):Y("",!0)]))}}),Gt={class:"Flex Milestone",style:{height:"100%","align-items":"center","white-space":"nowrap"}},Ht={class:"Flex",style:{position:"relative","flex-grow":1,margin:"10px",height:"65px","background-color":"rgba(0, 0, 0, 0.3)"}},Rt={style:{display:"flex","justify-content":"space-between","align-items":"center","align-content":"center","z-index":1,width:"100%",height:"100%",padding:"0 10px","box-sizing":"border-box"}},Wt={style:{width:"20%","font-size":"0px"}},Zt={class:"BarText",style:{"font-size":"25px"}},Vt={key:0,style:{color:"#e8d53a","font-weight":700}},qt={key:1},Jt={class:"BarText",style:{"font-size":"30px"}},es={style:{width:"20%","text-align":"right","font-size":"0px"}},ts={class:"BarText",style:{"font-size":"25px"}},ss=b({__name:"Milestone",props:{seconds:{default:25},milestone:{}},emits:["end"],setup(a,{emit:e}){const t=e,n=A({progressTweened:0,totalTweened:0}),s=C(()=>a.milestone.name),l=C(()=>F(a.milestone.amount||0)),o=C(()=>F(Math.max((a.milestone.amount||0)-n.value.totalTweened,0))),r=C(()=>!!(a.milestone.amount&&n.value.totalTweened&&a.milestone.amount<=n.value.totalTweened));function m(){if(!a.milestone.amount||!H.data)return 0;const T=a.milestone.addition?a.milestone.amount-a.milestone.addition:0;return Math.min((H.data-T)/(a.milestone.amount-T),1)*100}function y(){K.to(n.value,{progressTweened:m(),totalTweened:H.data,duration:2.5})}q(()=>H.data,()=>{y()});function E(){t("end")}return z(async()=>{y(),a.seconds>=0&&(await _(a.seconds*1e3),E())}),(T,v)=>(u(),p("div",Gt,[i("div",Ht,[i("div",{class:"Bar",style:O({position:"absolute","z-index":0,width:`${n.value.progressTweened}%`,height:"100%","background-color":"#6DD47E"})},null,4),i("div",Rt,[i("div",Wt,[i("span",Zt,[r.value?(u(),p("span",Vt,"MET!")):(u(),p("span",qt,[v[0]||(v[0]=i("span",{style:{"font-weight":600}},"Remaining:",-1)),x(" "+f(o.value),1)]))])]),i("div",Jt,[i("span",null,f(s.value),1)]),i("div",es,[i("span",ts,[v[1]||(v[1]=i("span",{style:{"font-weight":600}},"Goal:",-1)),x(" "+f(l.value),1)])])])])]))}}),ns=L(ss,[["__scopeId","data-v-67525a75"]]),os={class:"Flex",style:{"font-size":"33px","white-space":"nowrap","font-weight":500,"text-align":"center"}},is={key:0,style:{"white-space":"pre"}},as={key:1,style:{"white-space":"pre"}},ls=b({__name:"MusicTrack",props:{seconds:{default:25}},emits:["end"],setup(a,{emit:e}){const t=e,n=C(()=>{var l,o,r,m;const s=[(o=(l=X.data)==null?void 0:l.track)==null?void 0:o.title,(m=(r=X.data)==null?void 0:r.track)==null?void 0:m.artist].filter(Boolean);return s.length?s.join(" - "):void 0});return z(async()=>{if(await ne(X),!X.data.playing||!n.value){t("end");return}await _(a.seconds*1e3),t("end")}),(s,l)=>{var o;return u(),p("div",os,[(o=D(X).data)!=null&&o.playing?(u(),p("span",is,"ðŸŽµ "+f(n.value),1)):(u(),p("span",as,"â¸ "+f(n.value),1))])}}}),rs={id:"Ticker",class:"Grid",style:{flex:1,overflow:"hidden",height:"100%","padding-top":"0"}},ds=b({__name:"Ticker",emits:["set-dash"],setup(a,{emit:e}){const t={GenericMsg:Ne,Tweet:Ge,MiniCredits:We,CrowdControl:Je,UpcomingRun:at,Prize:ct,Bid:Xt,Milestone:ns,MusicTrack:ls},n=e,s=A(!0);async function l(){try{await Pe(nodecg.sendMessage("omnibarShowNext"),5e3)}catch{l()}}async function o(r,m){var T,v,B,h;if(Oe(r,m))return;s.value=!1,await W(),await _(500);const y=(v=(T=m==null?void 0:m.current)==null?void 0:T.props)==null?void 0:v.dash,E=(h=(B=r==null?void 0:r.current)==null?void 0:B.props)==null?void 0:h.dash;pe(y,E)||(n("set-dash",null),await _(500),await W(),await _(600),n("set-dash",E),await W(),E&&await _(600)),s.value=!0}return q(()=>j.data,(r,m)=>o(r,m)),(r,m)=>(u(),p("div",rs,[G(ce,{name:"ticker"},{default:ue(()=>{var y;return[(y=D(j).data)!=null&&y.current&&s.value?(u(),te(Be(t[D(j).data.current.type]),ke({key:`${D(j).data.current.type}${JSON.stringify(D(j).data.current.props)}`},D(j).data.current.props,{onEnd:l}),null,16)):Y("",!0)]}),_:1})]))}}),cs=L(ds,[["__scopeId","data-v-9adbf11c"]]),us={class:"Clock",style:{width:"100%",height:"100%"}},ps=b({__name:"Clock",setup(a){const e=A("00:00"),t=A("00/00/0000");function n(){const s=new Date;e.value=new Intl.DateTimeFormat("en-NL",{hour:"numeric",minute:"numeric",timeZone:"Europe/Amsterdam"}).format(s),t.value=new Intl.DateTimeFormat("en-NL",{timeZone:"Europe/Amsterdam"}).format(s)}return z(()=>{n();const l=60-new Date().getSeconds();setTimeout(()=>{n(),setInterval(()=>n(),1e3)},l*1e3)}),(s,l)=>(u(),p("div",us,[i("span",null,f(e.value),1),i("span",null,f(t.value),1)]))}}),fs=L(ps,[["__scopeId","data-v-8b2d7782"]]),ms={id:"omnibar"},gs={id:"left"},hs={id:"dash"},vs={class:"box"},ys={id:"right"},ws={class:"dashContainer"},xs={class:"dash"},As=b({__name:"main",setup(a){Ce({title:"Omnibar"});const e=A(null),t=A("981px");function n(l){if(l<1e3){t.value="1070px";return}if(l<1e4){t.value="1040px";return}l<1e5&&(t.value="1020px")}function s(l){e.value=l}return z(async()=>{var l,o;for(;!j.data;)await _(100);e.value=(o=(l=j.data.current)==null?void 0:l.props)==null?void 0:o.dash}),(l,o)=>(u(),p("div",ms,[i("div",{id:"information",class:de({"no-dash":!e.value}),style:O({width:e.value?t.value:void 0})},[G(cs,{onSetDash:s})],6),i("div",gs,[G(ce,{name:"omnibar-dash"},{default:ue(()=>[e.value?(u(),p("div",{class:"dashContainer",key:JSON.stringify(e.value)},[o[0]||(o[0]=i("div",{class:"arrow_base dash_seg_2"},null,-1)),o[1]||(o[1]=i("div",{class:"arrow_base dash_seg_1"},null,-1)),i("div",hs,[i("p",{style:O({left:e.value.left?`${e.value.left}px`:"40px","font-size":`${e.value.fontSize}px`,top:`${e.value.top}px`})},f(e.value.text),5)]),o[2]||(o[2]=i("div",{class:"arrow_base before_dash"},null,-1))])):Y("",!0)]),_:1}),i("div",vs,[G(fs,{class:"clock"})])]),i("div",ys,[i("div",ws,[i("div",xs,[G(Ke,{style:{"margin-right":"3px","text-align":"right","font-family":"Bahnschrift"},onTotalUpdate:n})])]),o[3]||(o[3]=i("div",{class:"arrow_base right after_right_box"},null,-1)),o[4]||(o[4]=i("div",{class:"box"},[i("img",{src:Fe,alt:""})],-1))])]))}}),_e=Ee(As),_s=ze();_e.use(_s);_e.mount("#app");
