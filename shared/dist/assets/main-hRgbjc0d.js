import{d as b,y as A,c as C,f as z,a as p,o as u,b as i,F as R,r as re,e as de,t as f,D as Y,n as O,B as x,k as D,z as q,u as be,g as W,M as Te,K as te,j as G,E as ce,A as ue,O as Be,P as ke,i as Ce,l as Ee,m as ze}from"./index-Ce_smM0X.js";import{o as De,h as H,S as Me,q as $e,b as M,m as X,v as j}from"./replicant_store-ByKiGZ6y.js";import{f as F,w as _,b as pe,c as Pe,d as Oe}from"./helpers-ZI0DYonA.js";import{g as K}from"./index-DEqwg3Z9.js";import{l as ne}from"./lodash-Cn84nazp.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as Q,r as fe,u as me,e as oe}from"./en-gb-Bshs-i9q.js";import{w as se}from"./helpers-Cfq79ybz.js";/* empty css                  */import"./_commonjsHelpers-BosuxZz1.js";const Fe="/bundles/esa-layouts/shared/dist/assets/mind_logo_tag-jpeemcPp.png",je="data:image/png;base64,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",Qe={class:"Flex"},Ie={id:"Total",class:"Flex"},Le={style:{position:"absolute",top:"10px",left:"180px","z-index":99999999999}},Ue={style:{"font-size":"28px",color:"#7FFF00","font-weight":600,"background-color":"rgba(0,0,0,0.6)",padding:"4px 8px","border-radius":"10px"}},Se=b({__name:"Total",emits:["totalUpdate"],setup(a,{emit:t}){const e=t,s=A(0),n=A(!1),l=A(!1),o=A("â‚¬0"),r=[];let m;const y=nodecg.bundleConfig.additionalDonations,E=C(()=>y.map(c=>{var d,g;return{key:c.key,description:c.description,amount:c.amount,active:((g=(d=De.data)==null?void 0:d.find(w=>w.key===c.key))==null?void 0:g.active)??!1}})),T=C(()=>E.value.filter(c=>c.active).reduce((c,d)=>c+d.amount,0)),v=C(()=>ne.round((H.data??0)+T.value,2)),B=C(()=>F(s.value));async function h(c=!1){nodecg.sendMessage("donationAlertsLogging",`playNextAlert called (start: ${c})`),clearTimeout(m),n.value=!0,c||await new Promise(N=>{setTimeout(N,500)});const{amount:d,total:g,showAlert:w}=r[0];nodecg.sendMessage("donationAlertsLogging",`alert - amount: ${d}, total: ${g}, showAlert: ${w}`),d&&d>0&&w&&(nodecg.sendMessage("omnibarPlaySound",{amount:d}),await new Promise(N=>{setTimeout(N,500)}),l.value=!0,o.value=F(d));const U=g??s.value+(d??0);nodecg.sendMessage("donationAlertsLogging",`decided we should animate to ${U}`),K.to(s,{value:U,duration:5}),await new Promise(N=>{setTimeout(N,6e3)}),r.shift(),l.value=!1,r.length?h():s.value!==v.value?(nodecg.sendMessage("donationAlertsLogging",`totals do not match at end of queue, pushing another total alert (was ${s.value}, should be ${v.value})`),clearTimeout(m),r.push({total:v.value,showAlert:!1}),h()):(nodecg.sendMessage("donationAlertsLogging","queue ended"),n.value=!1),e("totalUpdate",U)}return s.value=v.value,nodecg.listenFor("donationTotalUpdated",c=>{const d=ne.round(c.total+T.value,2);!n.value&&d!==s.value&&(nodecg.sendMessage("donationAlertsLogging","donationTotalTimeout decided we should push a new total as an alert"),r.push({total:d,amount:d-s.value,showAlert:!0}),n.value||h(!0))}),nodecg.listenFor("newDonation",c=>{clearTimeout(m),r.push({amount:c.amount,showAlert:!0}),n.value||h(!0)}),nodecg.listenFor("additionalDonationToggle",c=>{const d=E.value.find(g=>g.key===c.key);d&&(r.push({amount:(c.active?1:-1)*d.amount,showAlert:c.active}),n.value||h(!0))}),z(async()=>{for(;typeof s.value<"u";)await _(100);e("totalUpdate",s.value)}),(c,d)=>{var g;return u(),p("div",Qe,[d[1]||(d[1]=i("div",{class:"arrow_base right dash_seg_2"},null,-1)),d[2]||(d[2]=i("div",{class:"arrow_base right dash_seg_1"},null,-1)),i("div",Ie,[(u(!0),p(R,null,re(B.value,(w,U)=>(u(),p("span",{key:U,class:de(w===","?"Comma":void 0)},f(w),3))),128))]),i("div",Le,[r[0]?(u(),p("div",{key:0,style:O({"z-index":1,opacity:l.value?1:0,transition:"opacity 0.5s"}),class:"Flex coin-thing"},[d[0]||(d[0]=i("img",{src:je,style:{height:"50px","image-rendering":"pixelated","margin-right":"5px"}},null,-1)),i("span",Ue,f(r[0]?(g=r[0].amount)==null?void 0:g.toFixed(2):"â‚¬0"),1)],4)):Y("",!0)])])}}}),Ke=L(Se,[["__scopeId","data-v-0e57f4b4"]]),Ye={style:{"white-space":"pre"}},Ne=b({__name:"GenericMsg",props:{msg:{default:"Message?"},seconds:{default:25}},emits:["end"],setup(a,{emit:t}){const e=t,s=C(()=>a.msg.split(`
`).length);return z(async()=>{await _(a.seconds*1e3),e("end")}),(n,l)=>(u(),p("div",{class:"Flex",style:O({"font-size":s.value<2?"33px":"29px","white-space":"nowrap","font-weight":500,"text-align":"center"})},[i("span",Ye,f(n.msg),1)],4))}}),Xe={ref:"Tweet",class:"Flex Alert",style:{padding:"0 17px",height:"100%","font-weight":500,"flex-direction":"column","align-items":"flex-start",overflow:"hidden"}},Ge=b({__name:"Tweet",setup(a){return(t,e)=>(u(),p("div",Xe," Call duncte if this is ever shown. We don't even use RabbitMQ so this will never happen! (tweet) ",512))}}),He={ref:"MiniCredits",class:"Flex Alert MiniCredits",style:{padding:"0 17px",height:"100%","flex-direction":"column","align-items":"flex-start",overflow:"hidden"}},Re=b({__name:"MiniCredits",emits:["end"],setup(a,{emit:t}){const e=t;return z(()=>{e("end")}),(s,n)=>(u(),p("div",He," Minicredits not yet implemented in vue 3. ",512))}}),We=L(Re,[["__scopeId","data-v-4308b581"]]),Ze="/bundles/esa-layouts/shared/dist/assets/CrowdControl-DLpuA2SG.png",Ve={class:"Flex Alert",style:{padding:"0 17px",height:"100%","font-weight":500,"flex-direction":"column","align-items":"flex-start"}},qe={style:{"font-size":"23px","white-space":"nowrap",overflow:"hidden"}},Je=b({__name:"CrowdControl",props:{msg:{default:"Message?"},seconds:{default:25}},emits:["end"],setup(a,{emit:t}){const e=a,s=t;return z(async()=>{await _(e.seconds*1e3),s("end")}),(n,l)=>(u(),p("div",Ve,[l[0]||(l[0]=i("div",{style:{"font-size":"25px"}},[i("img",{src:Ze,style:{height:"1.2em",margin:"0 .05em 0 .1em","vertical-align":"-0.25em"}}),x(" Crowd Control ")],-1)),i("div",qe,f(n.msg),1)]))}}),et={class:"Flex",style:{padding:"0 17px","padding-top":"10px",height:"100%","font-weight":500,"flex-direction":"column","align-items":"flex-start"}},tt={style:{"font-size":"25px"}},nt={style:{"font-size":"35px"}},st={key:0},ot={key:0},it={key:1},at=b({__name:"UpcomingRun",props:{seconds:{default:25},run:{}},emits:["end"],setup(a,{emit:t}){Q.extend(fe),Q.extend(me);const e=t,{getRunTotalPlayers:s}=Me,n=C(()=>a.run.scheduledS&&a.run.scheduledS>Date.now()/1e3?`in about ${Q.utc().to(Q.unix(a.run.scheduledS),!0)}`:"soon");function l(o){return o.teams.map(r=>r.name||r.players.map(m=>m.name).join(", ")).join(" vs. ")||"N/A"}return z(async()=>{await _(a.seconds*1e3),e("end")}),(o,r)=>(u(),p("div",et,[i("div",tt,f(n.value),1),i("div",nt,[D(s)(o.run)>0?(u(),p("span",st,[x(f(l(o.run))+" play",1),D(s)(o.run)===1?(u(),p("span",ot,"s")):Y("",!0),x(" "+f(o.run.game),1)])):(u(),p("span",it,f(o.run.game),1))])]))}}),lt={class:"Flex",style:{padding:"0 17px","padding-top":"10px",height:"100%","font-weight":500,"flex-direction":"column","align-items":"flex-start"}},rt={style:{"font-size":"35px"}},dt={style:{"font-size":"20px"}},ct=b({__name:"Prize",props:{seconds:{default:25},prize:{}},emits:["end"],setup(a,{emit:t}){Q.extend(fe),Q.extend(me),Q.locale({...oe,name:"en-prizes",relativeTime:{...oe.relativeTime,s:"few seconds",m:"minute",h:"hour",d:"day",M:"month",y:"year"}},{},!0);const e=t,s=C(()=>a.prize.endTime?Q.unix(a.prize.endTime/1e3).utc().locale("en-prizes").fromNow(!0):"");return z(async()=>{await _(a.seconds*1e3),e("end")}),(n,l)=>(u(),p("div",lt,[i("div",rt," Prize Available: "+f(n.prize.name),1),i("div",dt," Provided by "+f(n.prize.provided)+", minimum donation amount: $"+f(n.prize.minimumBid.toFixed(2))+" (donate in the next "+f(s.value)+") ",1)]))}});function S(a,t){const e=a.find(s=>s.id===t);if(!e)throw new Error(`Bid with id ${t} not found.`);return $e(e)}const ut={class:"Goal",style:{height:"100%",display:"flex","align-items":"center"}},pt={style:{position:"relative","flex-grow":1,height:"70px","background-color":"rgba(0, 0, 0, 0.3)"}},ft={style:{display:"flex","justify-content":"space-between","align-items":"center",position:"absolute",width:"100%",height:"100%",padding:"0 10px","box-sizing":"border-box"}},mt={style:{width:"30%","font-size":"0px"}},gt={class:"BarText",style:{"font-size":"20px"}},ht={key:0,style:{color:"#42ff38","font-weight":700}},vt={key:1},yt={class:"BarTextFull",style:{"font-size":"20px","text-align":"center"}},wt={style:{width:"30%","text-align":"right","font-size":"0px"}},xt={class:"BarText",style:{"font-size":"25px"}},At=b({__name:"Goal",props:{seconds:{},bidId:{}},emits:["end"],setup(a,{emit:t}){const e=t,s=A({progress:0,total:0}),n=A({id:-1,goal:69,game:"",name:"",options:[],war:!0,allowUserOptions:!1,total:0}),l=C(()=>F(Math.max((n.value.goal??0)-s.value.total,0)));function o(){K.to(s.value,{progress:n.value.total/(n.value.goal??0)*100,total:n.value.total,duration:2.5})}return q(()=>M.data,r=>{if(r)try{n.value=S(r,a.bidId),o()}catch{e("end")}},{deep:!0,immediate:!0}),z(async()=>{await se(M);try{n.value=S(M.data,a.bidId),o()}catch{e("end");return}a.seconds>=0&&(await _(a.seconds*1e3),e("end"))}),(r,m)=>(u(),p("div",ut,[i("div",pt,[i("div",{class:"Bar",style:O({position:"absolute",width:`${s.value.progress}%`,height:"100%","background-color":"#6DD47E"})},null,4),i("div",ft,[i("div",mt,[i("span",gt,[n.value.goal<=n.value.total?(u(),p("span",ht," MET! ")):(u(),p("span",vt,[m[0]||(m[0]=i("span",{style:{"font-weight":600}},"Remaining:",-1)),x(" "+f(l.value),1)]))])]),i("div",yt,[i("div",null,[x(f(n.value.game)+" ",1),m[1]||(m[1]=i("br",null,null,-1)),x(f(n.value.name),1)])]),i("div",wt,[i("span",xt,[m[2]||(m[2]=i("span",{style:{"font-weight":600}},"Goal:",-1)),x(" "+f(D(F)(n.value.goal||0)),1)])])])])]))}}),_t=L(At,[["__scopeId","data-v-7867d897"]]),bt={class:"War1v1",style:{height:"100%",display:"flex","align-items":"center"}},Tt={style:{position:"relative","flex-grow":1,height:"70px","background-color":"rgba(0, 0, 0, 0.3)"}},Bt={style:{display:"flex","justify-content":"space-between",position:"absolute",width:"100%",height:"100%"}},kt={style:{display:"flex","justify-content":"space-between","align-items":"center",position:"absolute",width:"100%",height:"100%",padding:"0 10px","box-sizing":"border-box","z-index":1,"font-size":"0px"}},Ct={class:"BarText",style:{"font-size":"20px"}},Et={style:{"text-align":"right"}},zt={class:"BarText",style:{"font-size":"20px"}},Dt={style:{position:"absolute",width:"100%",height:"100%","z-index":2,display:"flex","justify-content":"center"}},Mt={style:{"font-size":"20px","text-align":"center","background-color":"rgba(0, 0, 0, 0.4)",padding:"0 10px",display:"flex","flex-direction":"column","justify-content":"center","line-height":"150%",height:"100%"}},$t=b({__name:"War-1v1",props:{seconds:{},bidId:{}},emits:["end"],setup(a,{emit:t}){const e=t,s=A({progress1:0,progress2:0,total1:0,total2:0}),n=A({id:-1,game:"",name:"",options:[{name:"",parent:-1,total:0,id:1},{name:"",parent:-1,total:0,id:2}],war:!0,allowUserOptions:!1,total:0});function l(){K.to(s.value,{progress1:n.value.options[0].total/n.value.total*100,progress2:n.value.options[1].total/n.value.total*100,total1:n.value.options[0].total,total2:n.value.options[1].total,duration:2.5})}return q(()=>M.data,o=>{if(o)try{n.value=S(o,a.bidId),l()}catch{e("end")}},{deep:!0,immediate:!0}),z(async()=>{await se(M);try{n.value=S(M.data,a.bidId),l()}catch{e("end");return}a.seconds>=0&&(await _(a.seconds*1e3),e("end"))}),(o,r)=>(u(),p("div",bt,[i("div",Tt,[i("div",Bt,[i("div",{style:O({width:`${s.value.progress1}%`,"background-color":"#FFD55A"})},null,4),i("div",{style:O({width:`${s.value.progress2}%`,"background-color":"#6DD47E"})},null,4)]),i("div",kt,[i("div",null,[i("span",Ct,f(n.value.options[0].name)+" - "+f(D(F)(s.value.total1)),1)]),i("div",Et,[i("span",zt,f(D(F)(s.value.total2))+" - "+f(n.value.options[1].name),1)])]),i("div",Dt,[i("div",Mt,[x(f(n.value.game)+" ",1),r[0]||(r[0]=i("br",null,null,-1)),x(f(n.value.name),1)])])])]))}}),Pt=L($t,[["__scopeId","data-v-104da48d"]]);/*!
 * ScrollToPlugin 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var k,ge,P,$,I,he,ve,ee,ye=function(){return typeof window<"u"},we=function(){return k||ye()&&(k=window.gsap)&&k.registerPlugin&&k},xe=function(t){return typeof t=="string"},ie=function(t){return typeof t=="function"},Z=function(t,e){var s=e==="x"?"Width":"Height",n="scroll"+s,l="client"+s;return t===P||t===$||t===I?Math.max($[n],I[n])-(P["inner"+s]||$[l]||I[l]):t[n]-t["offset"+s]},V=function(t,e){var s="scroll"+(e==="x"?"Left":"Top");return t===P&&(t.pageXOffset!=null?s="page"+e.toUpperCase()+"Offset":t=$[s]!=null?$:I),function(){return t[s]}},Ot=function(t,e,s,n){if(ie(t)&&(t=t(e,s,n)),typeof t!="object")return xe(t)&&t!=="max"&&t.charAt(1)!=="="?{x:t,y:t}:{y:t};if(t.nodeType)return{y:t,x:t};var l={},o;for(o in t)l[o]=o!=="onAutoKill"&&ie(t[o])?t[o](e,s,n):t[o];return l},Ae=function(t,e){if(t=he(t)[0],!t||!t.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var s=t.getBoundingClientRect(),n=!e||e===P||e===I,l=n?{top:$.clientTop-(P.pageYOffset||$.scrollTop||I.scrollTop||0),left:$.clientLeft-(P.pageXOffset||$.scrollLeft||I.scrollLeft||0)}:e.getBoundingClientRect(),o={x:s.left-l.left,y:s.top-l.top};return!n&&e&&(o.x+=V(e,"x")(),o.y+=V(e,"y")()),o},ae=function(t,e,s,n,l){return!isNaN(t)&&typeof t!="object"?parseFloat(t)-l:xe(t)&&t.charAt(1)==="="?parseFloat(t.substr(2))*(t.charAt(0)==="-"?-1:1)+n-l:t==="max"?Z(e,s)-l:Math.min(Z(e,s),Ae(t,e)[s]-l)},le=function(){k=we(),ye()&&k&&typeof document<"u"&&document.body&&(P=window,I=document.body,$=document.documentElement,he=k.utils.toArray,k.config({autoKillThreshold:7}),ve=k.config(),ge=1)},J={version:"3.12.5",name:"scrollTo",rawVars:1,register:function(t){k=t,le()},init:function(t,e,s,n,l){ge||le();var o=this,r=k.getProperty(t,"scrollSnapType");o.isWin=t===P,o.target=t,o.tween=s,e=Ot(e,n,t,l),o.vars=e,o.autoKill=!!e.autoKill,o.getX=V(t,"x"),o.getY=V(t,"y"),o.x=o.xPrev=o.getX(),o.y=o.yPrev=o.getY(),ee||(ee=k.core.globals().ScrollTrigger),k.getProperty(t,"scrollBehavior")==="smooth"&&k.set(t,{scrollBehavior:"auto"}),r&&r!=="none"&&(o.snap=1,o.snapInline=t.style.scrollSnapType,t.style.scrollSnapType="none"),e.x!=null?(o.add(o,"x",o.x,ae(e.x,t,"x",o.x,e.offsetX||0),n,l),o._props.push("scrollTo_x")):o.skipX=1,e.y!=null?(o.add(o,"y",o.y,ae(e.y,t,"y",o.y,e.offsetY||0),n,l),o._props.push("scrollTo_y")):o.skipY=1},render:function(t,e){for(var s=e._pt,n=e.target,l=e.tween,o=e.autoKill,r=e.xPrev,m=e.yPrev,y=e.isWin,E=e.snap,T=e.snapInline,v,B,h,c,d;s;)s.r(t,s.d),s=s._next;v=y||!e.skipX?e.getX():r,B=y||!e.skipY?e.getY():m,h=B-m,c=v-r,d=ve.autoKillThreshold,e.x<0&&(e.x=0),e.y<0&&(e.y=0),o&&(!e.skipX&&(c>d||c<-d)&&v<Z(n,"x")&&(e.skipX=1),!e.skipY&&(h>d||h<-d)&&B<Z(n,"y")&&(e.skipY=1),e.skipX&&e.skipY&&(l.kill(),e.vars.onAutoKill&&e.vars.onAutoKill.apply(l,e.vars.onAutoKillParams||[]))),y?P.scrollTo(e.skipX?v:e.x,e.skipY?B:e.y):(e.skipY||(n.scrollTop=e.y),e.skipX||(n.scrollLeft=e.x)),E&&(t===1||t===0)&&(B=n.scrollTop,v=n.scrollLeft,T?n.style.scrollSnapType=T:n.style.removeProperty("scroll-snap-type"),n.scrollTop=B+1,n.scrollLeft=v+1,n.scrollTop=B,n.scrollLeft=v),e.xPrev=e.x,e.yPrev=e.y,ee&&ee.update()},kill:function(t){var e=t==="scrollTo",s=this._props.indexOf(t);return(e||t==="scrollTo_x")&&(this.skipX=1),(e||t==="scrollTo_y")&&(this.skipY=1),s>-1&&this._props.splice(s,1),!this._props.length}};J.max=Z;J.getOffset=Ae;J.buildGetter=V;we()&&k.registerPlugin(J);const Ft={class:"WarOther",style:{height:"100%",display:"flex","align-items":"center"}},jt={style:{"flex-grow":1,display:"flex",height:"70px",overflow:"hidden"}},Qt={style:{display:"flex","justify-content":"center","flex-direction":"column","font-size":"20px","text-align":"center",padding:"0 10px","white-space":"nowrap","line-height":"150%"}},It={ref:"OptionsBar",style:{position:"relative","flex-grow":1,"white-space":"nowrap","font-size":"20px",overflow:"hidden",display:"flex","align-items":"center"}},Lt=["id"],Ut={style:{"font-weight":600}},St=["id"],Kt=b({__name:"War-Other",props:{seconds:{},bidId:{}},emits:["end"],setup(a,{emit:t}){K.registerPlugin(J);const e=t,s=A({id:-1,goal:69,game:"",name:"",options:[],war:!0,allowUserOptions:!1,total:0}),n=C(()=>{const h=ne.orderBy(s.value.options,["total"],["desc"]);return h.map(({id:c,name:d,total:g},w)=>({id:c,name:d,total:g,winning:(w===0||g>=h[0].total)&&g>0}))}),l=A([]),o=be("OptionsBar");let r,m=!1;function y(){const h=ne.orderBy(s.value.options,["total"],["desc"]);return h.map(({id:c,name:d,total:g},w)=>({id:c,name:d,total:g,winning:(w===0||g>=h[0].total)&&g>0}))}function E(){r==null||r.kill(),r=void 0}async function T(){try{E(),s.value=S(M.data,a.bidId),l.value=y(),await W(),await B()}catch{e("end")}}async function v(){if(!o.value)return;m=!1,r=K.timeline({paused:!0,onComplete:()=>{window.setTimeout(()=>{a.seconds>=0?e("end"):m?T().catch(console.log):r==null||r.restart()},4e3)}}),await _(4e3);const h=s.value.allowUserOptions?n.value.length+1:n.value.length,c=o.value.scrollWidth-o.value.clientWidth;let d=0;for(let g=1;g<h;g+=1){const w=document.getElementById(`Option${g+1}`);c>w.offsetLeft&&(d+=1)}for(let g=1;g<h;g+=1){const w=document.getElementById(`Option${g+1}`),U=g>1?`+=${Math.max((a.seconds-8)/(d+1),2)}`:void 0;if(r.to(o.value,{scrollLeft:Math.min(w.offsetLeft,c),duration:2},U),c<=w.offsetLeft)break}a.seconds<1&&r.to(o.value,{scrollTo:{x:0},duration:2},"+=4"),r.resume()}async function B(){if(o.value.scrollWidth<=o.value.clientWidth){a.seconds>=0&&(await _(a.seconds*1e3),e("end"));return}await v()}return q(()=>M.data,h=>{if(!h)return;const c=S(h,a.bidId);pe(s.value,c)||(m=!0,r!=null&&r.isActive()||T().catch(console.log))},{deep:!0}),z(async()=>{await se(M);try{s.value=S(M.data,a.bidId),l.value=y(),await W(),await B()}catch(h){console.error(h),e("end")}}),Te(()=>{E()}),(h,c)=>(u(),p("div",Ft,[i("div",jt,[i("div",Qt,[x(f(s.value.game)+" ",1),c[0]||(c[0]=i("br",null,null,-1)),x(f(s.value.name),1)]),c[1]||(c[1]=i("div",{style:{width:"3px","background-color":"white"}},null,-1)),i("div",It,[(u(!0),p(R,null,re(l.value,(d,g)=>(u(),p("div",{key:d.id,class:"Option",style:O({"background-color":d.winning?"#6DD47E":"#B37BA4","margin-left":g>0?"5px":"0"}),id:`Option${g+1}`},[i("span",Ut,f(d.name),1),x(": "+f(D(F)(d.total)),1)],12,Lt))),128)),s.value.allowUserOptions?(u(),p("div",{key:0,class:"Option",id:`Option${n.value.length+1}`},[n.value.length?(u(),p(R,{key:1},[x("...or submit your own!")],64)):(u(),p(R,{key:0},[x("No options submitted yet, be the first!")],64))],8,St)):Y("",!0)],512)])]))}}),Yt=L(Kt,[["__scopeId","data-v-00497193"]]),Nt={style:{height:"100%",overflow:"hidden"}},Xt=b({__name:"Bid",props:{seconds:{default:25},bid:{},bidId:{}},emits:["end"],setup(a,{emit:t}){const e=t;function s(){e("end")}return(n,l)=>(u(),p("div",Nt,[n.bid&&!n.bid.war?(u(),te(_t,{key:0,"bid-id":n.bidId,seconds:n.seconds,onEnd:s},null,8,["bid-id","seconds"])):n.bid?(u(),p(R,{key:1},[n.bid.options.length===2&&!n.bid.allowUserOptions?(u(),te(Pt,{key:0,"bid-id":n.bidId,seconds:n.seconds,onEnd:s},null,8,["bid-id","seconds"])):(u(),te(Yt,{key:1,"bid-id":n.bidId,seconds:n.seconds,onEnd:s},null,8,["bid-id","seconds"]))],64)):Y("",!0)]))}}),Gt={class:"Flex Milestone",style:{height:"100%","align-items":"center","white-space":"nowrap"}},Ht={class:"Flex",style:{position:"relative","flex-grow":1,margin:"10px",height:"65px","background-color":"rgba(0, 0, 0, 0.3)"}},Rt={style:{display:"flex","justify-content":"space-between","align-items":"center","align-content":"center","z-index":1,width:"100%",height:"100%",padding:"0 10px","box-sizing":"border-box"}},Wt={style:{width:"20%","font-size":"0px"}},Zt={class:"BarText",style:{"font-size":"25px"}},Vt={key:0,style:{color:"#e8d53a","font-weight":700}},qt={key:1},Jt={class:"BarText",style:{"font-size":"30px"}},en={style:{width:"20%","text-align":"right","font-size":"0px"}},tn={class:"BarText",style:{"font-size":"25px"}},nn=b({__name:"Milestone",props:{seconds:{default:25},milestone:{}},emits:["end"],setup(a,{emit:t}){const e=t,s=A({progressTweened:0,totalTweened:0}),n=C(()=>a.milestone.name),l=C(()=>F(a.milestone.amount||0)),o=C(()=>F(Math.max((a.milestone.amount||0)-s.value.totalTweened,0))),r=C(()=>!!(a.milestone.amount&&s.value.totalTweened&&a.milestone.amount<=s.value.totalTweened));function m(){if(!a.milestone.amount||!H.data)return 0;const T=a.milestone.addition?a.milestone.amount-a.milestone.addition:0;return Math.min((H.data-T)/(a.milestone.amount-T),1)*100}function y(){K.to(s.value,{progressTweened:m(),totalTweened:H.data,duration:2.5})}q(()=>H.data,()=>{y()});function E(){e("end")}return z(async()=>{y(),a.seconds>=0&&(await _(a.seconds*1e3),E())}),(T,v)=>(u(),p("div",Gt,[i("div",Ht,[i("div",{class:"Bar",style:O({position:"absolute","z-index":0,width:`${s.value.progressTweened}%`,height:"100%","background-color":"#6DD47E"})},null,4),i("div",Rt,[i("div",Wt,[i("span",Zt,[r.value?(u(),p("span",Vt,"MET!")):(u(),p("span",qt,[v[0]||(v[0]=i("span",{style:{"font-weight":600}},"Remaining:",-1)),x(" "+f(o.value),1)]))])]),i("div",Jt,[i("span",null,f(n.value),1)]),i("div",en,[i("span",tn,[v[1]||(v[1]=i("span",{style:{"font-weight":600}},"Goal:",-1)),x(" "+f(l.value),1)])])])])]))}}),sn=L(nn,[["__scopeId","data-v-67525a75"]]),on={class:"Flex",style:{"font-size":"33px","white-space":"nowrap","font-weight":500,"text-align":"center"}},an={key:0,style:{"white-space":"pre"}},ln={key:1,style:{"white-space":"pre"}},rn=b({__name:"MusicTrack",props:{seconds:{default:25}},emits:["end"],setup(a,{emit:t}){const e=t,s=C(()=>{var l,o,r,m;const n=[(o=(l=X.data)==null?void 0:l.track)==null?void 0:o.title,(m=(r=X.data)==null?void 0:r.track)==null?void 0:m.artist].filter(Boolean);return n.length?n.join(" - "):void 0});return z(async()=>{if(await se(X),!X.data.playing||!s.value){e("end");return}await _(a.seconds*1e3),e("end")}),(n,l)=>{var o;return u(),p("div",on,[(o=D(X).data)!=null&&o.playing?(u(),p("span",an,"ðŸŽµ "+f(s.value),1)):(u(),p("span",ln,"â¸ "+f(s.value),1))])}}}),dn={id:"Ticker",class:"Grid",style:{flex:1,overflow:"hidden",height:"100%","padding-top":"0"}},cn=b({__name:"Ticker",emits:["set-dash"],setup(a,{emit:t}){const e={GenericMsg:Ne,Tweet:Ge,MiniCredits:We,CrowdControl:Je,UpcomingRun:at,Prize:ct,Bid:Xt,Milestone:sn,MusicTrack:rn},s=t,n=A(!0);async function l(){try{await Pe(nodecg.sendMessage("omnibarShowNext"),5e3)}catch{l()}}async function o(r,m){var T,v,B,h;if(Oe(r,m))return;n.value=!1,await W(),await _(500);const y=(v=(T=m==null?void 0:m.current)==null?void 0:T.props)==null?void 0:v.dash,E=(h=(B=r==null?void 0:r.current)==null?void 0:B.props)==null?void 0:h.dash;pe(y,E)||(s("set-dash",null),await _(500),await W(),await _(600),s("set-dash",E),await W(),E&&await _(600)),n.value=!0}return q(()=>j.data,(r,m)=>o(r,m)),(r,m)=>(u(),p("div",dn,[G(ce,{name:"ticker"},{default:ue(()=>{var y;return[(y=D(j).data)!=null&&y.current&&n.value?(u(),te(Be(e[D(j).data.current.type]),ke({key:`${D(j).data.current.type}${JSON.stringify(D(j).data.current.props)}`},D(j).data.current.props,{onEnd:l}),null,16)):Y("",!0)]}),_:1})]))}}),un=L(cn,[["__scopeId","data-v-9adbf11c"]]),pn={class:"Clock",style:{width:"100%",height:"100%"}},fn=b({__name:"Clock",setup(a){const t=A("00:00"),e=A("00/00/0000");function s(){const n=new Date;t.value=new Intl.DateTimeFormat("en-NL",{hour:"numeric",minute:"numeric",timeZone:"Europe/Amsterdam"}).format(n),e.value=new Intl.DateTimeFormat("en-NL",{timeZone:"Europe/Amsterdam"}).format(n)}return z(()=>{s();const l=60-new Date().getSeconds();setTimeout(()=>{s(),setInterval(()=>s(),1e3)},l*1e3)}),(n,l)=>(u(),p("div",pn,[i("span",null,f(t.value),1),i("span",null,f(e.value),1)]))}}),mn=L(fn,[["__scopeId","data-v-8b2d7782"]]),gn={id:"omnibar"},hn={id:"left"},vn={id:"dash"},yn={class:"box"},wn={id:"right"},xn={class:"dashContainer"},An={class:"dash"},_n=b({__name:"main",setup(a){Ce({title:"Omnibar"});const t=A(null),e=A("981px");function s(l){if(l<1e3){e.value="1070px";return}if(l<1e4){e.value="1040px";return}l<1e5&&(e.value="1020px")}function n(l){t.value=l}return z(async()=>{var l,o;for(;!j.data;)await _(100);t.value=(o=(l=j.data.current)==null?void 0:l.props)==null?void 0:o.dash}),(l,o)=>(u(),p("div",gn,[i("div",{id:"information",class:de({"no-dash":!t.value}),style:O({width:t.value?e.value:void 0})},[G(un,{onSetDash:n})],6),i("div",hn,[G(ce,{name:"omnibar-dash"},{default:ue(()=>[t.value?(u(),p("div",{class:"dashContainer",key:JSON.stringify(t.value)},[o[0]||(o[0]=i("div",{class:"arrow_base dash_seg_2"},null,-1)),o[1]||(o[1]=i("div",{class:"arrow_base dash_seg_1"},null,-1)),i("div",vn,[i("p",{style:O({left:t.value.left?`${t.value.left}px`:"40px","font-size":`${t.value.fontSize}px`,top:`${t.value.top}px`})},f(t.value.text),5)]),o[2]||(o[2]=i("div",{class:"arrow_base before_dash"},null,-1))])):Y("",!0)]),_:1}),i("div",yn,[G(mn,{class:"clock"})])]),i("div",wn,[i("div",xn,[i("div",An,[G(Ke,{style:{"margin-right":"3px","text-align":"right","font-family":"Bahnschrift"},onTotalUpdate:s})])]),o[3]||(o[3]=i("div",{class:"arrow_base right after_right_box"},null,-1)),o[4]||(o[4]=i("div",{class:"box"},[i("img",{src:Fe,alt:""})],-1))])]))}}),_e=Ee(_n),bn=ze();_e.use(bn);_e.mount("#app");
