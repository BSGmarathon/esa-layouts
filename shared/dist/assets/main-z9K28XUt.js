import{y as N,d as C,N as c,K as _,o as m,A as d,j as u,P as H,B as r,b as n,t as y,c as B,z as J,k as I,D as z,a as A,r as ee,O as Q,F as W,i as ne,f as te,l as oe,m as se}from"./index-Ce_smM0X.js";import{V as ae,v as le}from"./vuetify-BC_h0XMe.js";import{d as ie,c as de}from"./pinia-ey_1N9KB.js";import{q as S,v as g}from"./replicant_store-BlOELdrX.js";import{D as K}from"./vuedraggable.umd-CwaN1Msl.js";import{w as re}from"./helpers-Cfq79ybz.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{v as ue}from"./v4-CtRu48qb.js";import"./_commonjsHelpers-BosuxZz1.js";const j=ie("omnibar",()=>{const x=N(""),o=N(!1),e=N(!1),l=N([]);function k({val:v,manual:M=!1}){l.value=S(v),e.value=M}function w(v){const M=l.value.findIndex(i=>i.id===v);M>-1&&(l.value.splice(M,1),e.value=!0)}function f(){g.data.rotation=S(l.value),g.save(),e.value=!1}function p(v){const M=l.value.findIndex(i=>i.id===v.id);M>=0&&(l.value[M]=S(v),e.value=!0)}return{editItemId:x,editDialog:o,localEdits:e,localRotation:l,setLocalRotation:k,deleteItem:w,storeToGlobalLocation:f,updateLocalItem:p}}),pe=C({__name:"SpeedDial",props:{id:{}},setup(x){const o=j(),e=N(!1);function l(){o.editItemId=x.id,o.editDialog=!0}function k(){o.deleteItem(x.id)}return(w,f)=>{const p=c("v-icon"),v=c("v-btn"),M=c("v-speed-dial");return m(),_(M,{modelValue:e.value,"onUpdate:modelValue":f[0]||(f[0]=i=>e.value=i),transition:"fade-transition",location:"left center"},{activator:d(({props:i})=>[u(v,H({color:"blue darken-2"},i,{position:"absolute",size:"small",location:"right center",class:"speed-dial",icon:"mdi-close"}),{default:d(()=>[e.value?(m(),_(p,{key:0},{default:d(()=>f[1]||(f[1]=[r("mdi-close")])),_:1})):(m(),_(p,{key:1},{default:d(()=>f[2]||(f[2]=[r("mdi-cog")])),_:1}))]),_:2},1040)]),default:d(()=>[u(v,{key:"1",icon:"mdi-pencil",size:"x-small",color:"green",onClick:l}),u(v,{key:"2",icon:"mdi-delete",size:"x-small",color:"red",onClick:k})]),_:1},8,["modelValue"])}}}),G=X(pe,[["__scopeId","data-v-17415543"]]),ce=C({__name:"Bid",props:{id:{},seconds:{default:25}},setup(x){return(o,e)=>{const l=c("v-card");return m(),_(l,{class:"pa-2"},{default:d(()=>[u(G,{id:o.id},null,8,["id"]),e[1]||(e[1]=n("div",null,[n("span",{class:"font-weight-bold"},"Type:"),r(" Random Bid (favours sooner) ")],-1)),n("div",null,[e[0]||(e[0]=n("span",{class:"font-weight-bold"},"Length (min):",-1)),r(" "+y(o.seconds)+" seconds ",1)])]),_:1})}}}),me=C({__name:"EditDialog",setup(x){function o(a){return!!a||"Required"}function e(a){return!Number.isNaN(Number(a))||"Must be a number"}function l(a){const t=Number(a);return!!t&&t>=5||"Must be 5 or higher"}function k(a){return a.split(`
`).length<=2||"Must be 2 lines or less"}const w=j(),f=N(!1),p=N(null),v=B(()=>{var a;return((a=p.value)==null?void 0:a.type)==="Bid"?"Minimum Length (seconds)":"Length (seconds)"}),M=B(()=>{var a;switch((a=p.value)==null?void 0:a.type){case"GenericMsg":return[{elem:ae,name:"Message",key:"msg",icon:"mdi-android-messages",rules:[o,k],props:{"no-resize":!0,rows:2}}];default:return[]}}),i=B({get:()=>{var a,t;return(t=(a=p.value)==null?void 0:a.props)==null?void 0:t.seconds},set:a=>{var t,R;(R=(t=p.value)==null?void 0:t.props)!=null&&R.seconds&&!Number.isNaN(Number(a))&&(p.value.props.seconds=Number(a))}});function s(){p.value&&(w.updateLocalItem(p.value),w.editDialog=!1)}return J(()=>w.editDialog,a=>{a?p.value=S(w.localRotation.find(t=>t.id===w.editItemId))||null:p.value=null}),(a,t)=>{const R=c("v-text-field"),T=c("v-form"),b=c("v-card-text"),P=c("v-spacer"),U=c("v-btn"),E=c("v-card-actions"),F=c("v-card"),O=c("v-dialog");return m(),_(O,{class:"Dialog",modelValue:I(w).editDialog,"onUpdate:modelValue":t[3]||(t[3]=V=>I(w).editDialog=V),persistent:""},{default:d(()=>[u(F,null,{default:d(()=>[p.value&&p.value.props?(m(),_(b,{key:0,class:"pa-4 pb-0"},{default:d(()=>[u(T,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=V=>f.value=V)},{default:d(()=>[u(R,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=V=>i.value=V),label:v.value,"prepend-icon":"mdi-timer",autocomplete:"off",rules:[o,e,l],filled:"",dense:"",type:"number",min:5},null,8,["modelValue","label","rules"]),(m(!0),A(W,null,ee(M.value,({elem:V,name:$,key:L,icon:D,rules:Y,props:Z})=>(m(),_(Q(V),H({modelValue:p.value.props[L],"onUpdate:modelValue":h=>p.value.props[L]=h,key:L,label:$,"prepend-icon":D,autocomplete:"off",rules:Y,filled:"",dense:"",ref_for:!0},Z),null,16,["modelValue","onUpdate:modelValue","label","prepend-icon","rules"]))),128))]),_:1},8,["modelValue"])]),_:1})):z("",!0),u(E,null,{default:d(()=>[u(P),u(U,{onClick:s,disabled:!f.value},{default:d(()=>t[4]||(t[4]=[r("Save")])),_:1},8,["disabled"]),u(U,{onClick:t[2]||(t[2]=V=>I(w).editDialog=!1)},{default:d(()=>t[5]||(t[5]=[r("Cancel")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),fe={class:"d-flex"},ve={style:{"white-space":"pre-wrap"}},_e=C({__name:"GenericMsg",props:{id:{},msg:{default:"Message?"},seconds:{default:25}},setup(x){return(o,e)=>{const l=c("v-card");return m(),_(l,{class:"pa-2"},{default:d(()=>[u(G,{id:o.id},null,8,["id"]),e[2]||(e[2]=n("div",null,[n("span",{class:"font-weight-bold"},"Type:"),r(" Generic Message ")],-1)),n("div",fe,[e[0]||(e[0]=n("div",{class:"font-weight-bold mr-1"},"Message:",-1)),n("div",ve,y(o.msg),1)]),n("div",null,[e[1]||(e[1]=n("span",{class:"font-weight-bold"},"Length:",-1)),r(" "+y(o.seconds)+" seconds ",1)])]),_:1})}}}),ge=C({__name:"Milestone",props:{id:{},seconds:{default:25}},setup(x){return(o,e)=>{const l=c("v-card");return m(),_(l,{class:"pa-2"},{default:d(()=>[u(G,{id:o.id},null,8,["id"]),e[1]||(e[1]=n("div",null,[n("span",{class:"font-weight-bold"},"Type:"),r(" Random Milestone ")],-1)),n("div",null,[e[0]||(e[0]=n("span",{class:"font-weight-bold"},"Length:",-1)),r(" "+y(o.seconds)+" seconds ",1)])]),_:1})}}}),be=C({__name:"Prize",props:{id:{},seconds:{default:25}},setup(x){return(o,e)=>{const l=c("v-card");return m(),_(l,{class:"pa-2"},{default:d(()=>[u(G,{id:o.id},null,8,["id"]),e[1]||(e[1]=n("div",null,[n("span",{class:"font-weight-bold"},"Type:"),r(" Random Prize ")],-1)),n("div",null,[e[0]||(e[0]=n("span",{class:"font-weight-bold"},"Length:",-1)),r(" "+y(o.seconds)+" seconds ",1)])]),_:1})}}}),ye=C({__name:"UpcomingRun",props:{id:{},seconds:{default:25}},setup(x){return(o,e)=>{const l=c("v-card");return m(),_(l,{class:"pa-2"},{default:d(()=>[u(G,{id:o.id},null,8,["id"]),e[1]||(e[1]=n("div",null,[n("span",{class:"font-weight-bold"},"Type:"),r(" Upcoming Run (1 of next 4) ")],-1)),n("div",null,[e[0]||(e[0]=n("span",{class:"font-weight-bold"},"Length:",-1)),r(" "+y(o.seconds)+" seconds ",1)])]),_:1})}}}),ke=C({__name:"MusicTrack",props:{id:{},seconds:{default:25}},setup(x){return(o,e)=>{const l=c("v-card");return m(),_(l,{class:"pa-2"},{default:d(()=>[u(G,{id:o.id},null,8,["id"]),e[1]||(e[1]=n("div",null,[n("span",{class:"font-weight-bold"},"Type:"),r(" Current song ")],-1)),n("div",null,[e[0]||(e[0]=n("span",{class:"font-weight-bold"},"Length:",-1)),r(" "+y(o.seconds)+" seconds ",1)])]),_:1})}}}),we={class:"d-flex mt-2"},Me={key:1,class:"text-center mt-4"},xe={class:"font-weight-bold"},Ve=C({__name:"main",setup(x){ne({title:"Omnibar ticker control"});const o={GenericMsg:_e,UpcomingRun:ye,Prize:be,Bid:ce,Milestone:ge,MusicTrack:ke},e=j(),l=[{key:"GenericMsg",name:"Generic Message"},{key:"MusicTrack",name:"Current song"},{key:"Bid",name:"Random Bid (favours sooner)"},{key:"Milestone",name:"Random Milestone"},{key:"Prize",name:"Random Prize"},{key:"UpcomingRun",name:"Upcoming Run (1 of next 4)"}],k=B(()=>{var i,s,a,t,R,T,b,P,U,E,F,O,V;return{index:g.data.rotation.findIndex($=>{var L,D;return $.id===((D=(L=g.data)==null?void 0:L.current)==null?void 0:D.id)}),type:(s=(i=g.data)==null?void 0:i.current)==null?void 0:s.type,name:((a=l.find($=>{var L,D;return $.key===((D=(L=g.data)==null?void 0:L.current)==null?void 0:D.type)}))==null?void 0:a.name)||((R=(t=g.data)==null?void 0:t.current)==null?void 0:R.type),seconds:((P=(b=(T=g.data)==null?void 0:T.current)==null?void 0:b.props)==null?void 0:P.seconds)||0,secondsStr:["Bid","MiniCredits"].includes(((E=(U=g.data)==null?void 0:U.current)==null?void 0:E.type)||"")?"Minimum Length (seconds)":"Length (seconds)",msg:((V=(O=(F=g.data)==null?void 0:F.current)==null?void 0:O.props)==null?void 0:V.msg)||""}});function w(i){return{type:i.key,id:ue(),props:{seconds:25,msg:i.key==="GenericMsg"?"Message?":void 0}}}const f=B({get:()=>e.localRotation,set:i=>{e.setLocalRotation({val:i,manual:!0})}}),p=B(()=>e.localEdits);function v(i){e.setLocalRotation({val:S(i||g.data.rotation)})}function M(){e.storeToGlobalLocation()}return J(()=>{var i;return(i=g.data)==null?void 0:i.rotation},i=>{e.localEdits||v(i)}),te(async()=>{await re(g),v()}),(i,s)=>{const a=c("v-card"),t=c("v-btn"),R=c("v-icon"),T=c("v-app");return I(g).data?(m(),_(T,{key:0},{default:d(()=>[u(me),s[10]||(s[10]=n("span",{class:"text-h6"},"New Components",-1)),u(I(K),{class:"d-flex flex-wrap",list:l,group:{name:"ticker",pull:"clone",put:!1},clone:w,sort:!1,"item-key":"key",style:{gap:"0px 10px"}},{item:d(({element:b})=>[(m(),_(a,{class:"pa-2 mt-2",key:b.key},{default:d(()=>[r(y(b.name),1)]),_:2},1024))]),_:1}),s[11]||(s[11]=n("span",{class:"text-h6 mt-4"},"Rotation",-1)),f.value.length?z("",!0):(m(),_(a,{key:0,class:"pa-2 mt-2 font-italic"},{default:d(()=>s[2]||(s[2]=[r(" Drag elements from above to here to add. ")])),_:1})),u(I(K),{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=b=>f.value=b),"item-key":"id",group:"ticker","ghost-class":"Ghost",style:{"max-height":"400px","overflow-y":"auto"}},{item:d(({element:b})=>[n("div",null,[(m(),_(Q(o[b.type]),H({class:"mt-2",id:b.id},b.props),null,16,["id"]))])]),_:1},8,["modelValue"]),n("div",we,[u(t,{class:"flex-grow-1 mr-2",disabled:!p.value,onClick:M},{default:d(()=>s[3]||(s[3]=[r(" Save ")])),_:1},8,["disabled"]),u(t,{disabled:!p.value,onClick:s[1]||(s[1]=b=>v())},{default:d(()=>[u(R,null,{default:d(()=>s[4]||(s[4]=[r("mdi-refresh")])),_:1})]),_:1},8,["disabled"])]),k.value.type?(m(),A("div",Me,[s[7]||(s[7]=n("span",{class:"font-weight-bold"},"Current:",-1)),r(" "+y(k.value.name)+" ",1),s[8]||(s[8]=n("br",null,null,-1)),n("span",xe,y(k.value.secondsStr)+":",1),r(" "+y(k.value.seconds)+" - ",1),s[9]||(s[9]=n("span",{class:"font-weight-bold"},"Position:",-1)),r(" "+y(k.value.index+1||"?")+"/"+y(I(g).data.rotation.length)+" ",1),k.value.type==="GenericMsg"?(m(),A(W,{key:0},[s[5]||(s[5]=n("br",null,null,-1)),s[6]||(s[6]=n("span",{class:"font-weight-bold"},"Message:",-1)),r(" "+y(k.value.msg),1)],64)):z("",!0)])):z("",!0)]),_:1})):z("",!0)}}}),Re=X(Ve,[["__scopeId","data-v-ed2fadc4"]]),q=oe(Re),Le=se(),Ce=de();q.use(Le);q.use(le);q.use(Ce);q.mount("#app");
